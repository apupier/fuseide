<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Dropbox Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="drill-component.html" title="Drill Component"><link rel="next" href="ehcache-component.html" title="Ehcache Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="dropbox-component"></a>Dropbox Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="dropbox-component.html#_uri_format_63">URI format</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_operations">Operations</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_options_38">Options</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_del_operation">Del operation</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_get_download_operation">Get (download) operation</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_move_operation">Move operation</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_put_upload_operation">Put (upload) operation</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_search_operation">Search operation</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.14</strong></span></p><p>The <span class="strong"><strong>dropbox:</strong></span> component allows you to treat
<a class="link" href="https://www.dropbox.com" target="_top">Dropbox</a>&nbsp;remote folders as a producer or
consumer of messages. Using the
<a class="link" href="http://dropbox.github.io/dropbox-sdk-java/api-docs/v1.7.x/" target="_top">Dropbox Java
Core API</a> (reference version for this component is 1.7.x), this camel
component has the following features:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">As a consumer, download files and search files by queries</li><li class="listitem">As a producer, download files, move files between remote directories,
delete files/dir, upload files&nbsp;and search files by queries</li></ul></div><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-dropbox<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_63"></a>URI format</h2></div></div></div><pre class="screen">dropbox://[operation]?[options]</pre><p>Where <span class="strong"><strong>operation</strong></span> is the specific action (typically is a CRUD action) to
perform on Dropbox remote folder.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_operations"></a>Operations</h2></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="40%" class="col_1"><col width="60%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Operation</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">del</code></p></td><td align="left" valign="top"><p>deletes files or directories on Dropbox</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">get</code></p></td><td align="left" valign="top"><p>download files from Dropbox</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">move</code></p></td><td align="left" valign="top"><p>move files from folders on Dropbox</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">put</code></p></td><td align="left" valign="top"><p>upload files on Dropbox</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">search</code></p></td><td align="left" valign="top"><p>search files on Dropbox based on string queries</p></td></tr></tbody></table></div><p><span class="strong"><strong>Operations</strong></span> require additional options to work, some are mandatory for
the specific operation.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_38"></a>Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="dropbox-component.html#_path_parameters_1_parameters_53">Path Parameters (1 parameters):</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_query_parameters_12_parameters_5">Query Parameters (12 parameters):</a></span></dt></dl></div><p>In order to work with Dropbox API you need to obtain an&nbsp;<span class="strong"><strong>accessToken</strong></span>
and a <span class="strong"><strong>clientIdentifier.</strong></span>
You can refer to the
<a class="link" href="https://www.dropbox.com/developers/core/start/java" target="_top">Dropbox
documentation</a> that explains how to get them.&nbsp;&nbsp;</p><p>The Dropbox component has no options.</p><p>The Dropbox endpoint is configured using URI syntax:</p><pre class="screen">dropbox:operation</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_1_parameters_53"></a>Path Parameters (1 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>operation</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The specific action (typically is a CRUD action) to perform on Dropbox remote folder.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>DropboxOperation</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_12_parameters_5"></a>Query Parameters (12 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>accessToken</strong></span> (common)</p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The access token to make API requests for a specific Dropbox user</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>client</strong></span> (common)</p></td><td align="left" valign="top"><p>To use an existing DbxClient instance as DropBox client.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>DbxClientV2</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>clientIdentifier</strong></span> (common)</p></td><td align="left" valign="top"><p>Name of the app registered to make API requests</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>localPath</strong></span> (common)</p></td><td align="left" valign="top"><p>Optional folder or file to upload on Dropbox from the local filesystem. If this option has not been configured then the message body is used as the content to upload.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>newRemotePath</strong></span> (common)</p></td><td align="left" valign="top"><p>Destination file or folder</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>query</strong></span> (common)</p></td><td align="left" valign="top"><p>A space-separated list of sub-strings to search for. A file matches only if it contains all the sub-strings. If this option is not set, all files will be matched.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>remotePath</strong></span> (common)</p></td><td align="left" valign="top"><p>Original file or folder to move</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>uploadMode</strong></span> (common)</p></td><td align="left" valign="top"><p>Which mode to upload. in case of add the new file will be renamed if a file with the same name already exists on dropbox. in case of force if a file with the same name already exists on dropbox, this will be overwritten.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>DropboxUploadMode</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>bridgeErrorHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions occurred while the consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exceptionHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExceptionHandler</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exchangePattern</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExchangePattern</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_del_operation"></a>Del operation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="dropbox-component.html#_samples_9">Samples</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_headers">Result Message Headers</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_body">Result Message Body</a></span></dt></dl></div><p>Delete files on Dropbox.</p><p>Works only as Camel producer.</p><p>Below are listed the options for this operation:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="20%" class="col_1"><col width="20%" class="col_2"><col width="60%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Mandatory</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">remotePath</code></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>Folder or file to delete on Dropbox</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_samples_9"></a>Samples</h3></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://del?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/root/folder1"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://del?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/root/folder1/file1.tar.gz"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_headers"></a>Result Message Headers</h3></div></div></div><p>The following headers are set on message result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Value</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">DELETED_PATH</code></p></td><td align="left" valign="top"><p>name of the path deleted on dropbox</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_body"></a>Result Message Body</h3></div></div></div><p>The following objects are set on message body result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Object type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>name of the path deleted on dropbox</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_get_download_operation"></a>Get (download) operation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="dropbox-component.html#_samples_10">Samples</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_headers_2">Result Message Headers</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_body_2">Result Message Body</a></span></dt></dl></div><p>Download files from Dropbox.</p><p>Works as Camel producer or Camel consumer.</p><p>Below are listed the options for this operation:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="20%" class="col_1"><col width="20%" class="col_2"><col width="60%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Mandatory</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">remotePath</code></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>Folder or file to download from Dropbox</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_samples_10"></a>Samples</h3></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://get?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/root/folder1/file1.tar.gz"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:///home/kermit/?fileName=file1.tar.gz"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://get?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/root/folder1"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://get?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/root/folder1"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:///home/kermit/"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_headers_2"></a>Result Message Headers</h3></div></div></div><p>The following headers are set on message result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Value</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">DOWNLOADED_FILE</code></p></td><td align="left" valign="top"><p>in case of single file download, path of the remote file downloaded</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">DOWNLOADED_FILES</code></p></td><td align="left" valign="top"><p>in case of multiple files download, path of the remote files downloaded</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_body_2"></a>Result Message Body</h3></div></div></div><p>The following objects are set on message body result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Object type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">ByteArrayOutputStream</code></p></td><td align="left" valign="top"><p>in case of single file download, stream representing the file downloaded</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Map&lt;String, ByteArrayOutputStream&gt;</code></p></td><td align="left" valign="top"><p>in case of multiple files download, a map with as key the path of the
remote file downloaded and as value the stream representing the file
downloaded</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_move_operation"></a>Move operation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="dropbox-component.html#_samples_11">Samples</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_headers_3">Result Message Headers</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_body_3">Result Message Body</a></span></dt></dl></div><p>Move files on Dropbox between one folder to another.</p><p>Works only as Camel producer.</p><p>Below are listed the options for this operation:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="20%" class="col_1"><col width="20%" class="col_2"><col width="60%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Mandatory</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">remotePath</code></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>Original file or folder to move</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">newRemotePath</code></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>Destination file or folder</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_samples_11"></a>Samples</h3></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://move?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/root/folder1&amp;newRemotePath=/root/folder2"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_headers_3"></a>Result Message Headers</h3></div></div></div><p>The following headers are set on message result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Value</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">MOVED_PATH</code></p></td><td align="left" valign="top"><p>name of the path moved on dropbox</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_body_3"></a>Result Message Body</h3></div></div></div><p>The following objects are set on message body result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Object type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>name of the path moved on dropbox</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_put_upload_operation"></a>Put (upload) operation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="dropbox-component.html#_samples_12">Samples</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_headers_4">Result Message Headers</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_body_4">Result Message Body</a></span></dt></dl></div><p>Upload files on Dropbox.</p><p>Works as Camel producer.</p><p>Below are listed the options for this operation:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="20%" class="col_1"><col width="20%" class="col_2"><col width="60%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Mandatory</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">uploadMode</code></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>add or force this option specifies how a file should be saved on
dropbox: in case of "add" the new file will be renamed if a file with the same
name already exists on dropbox. In case of "force" if a file with the same name already exists on
dropbox, this will be overwritten.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">localPath</code></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>Folder or file to upload on Dropbox from the local filesystem.
If this option has been configured then it takes precedence over uploading as a single
file with content from the Camel message body (message body is converted into a byte array).</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">remotePath</code></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>Folder destination on Dropbox. If the property is not set, the component
will upload the file on a remote path equal to the local path. With Windows or without an absolute
localPath you may run into an exception like the following:</p><p>Caused by: java.lang.IllegalArgumentException: 'path': bad path: must start with "/": "C:/My/File"
OR
Caused by: java.lang.IllegalArgumentException: 'path': bad path: must start with "/": "MyFile"</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_samples_12"></a>Samples</h3></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://put?accessToken=XXX&amp;clientIdentifier=XXX&amp;uploadMode=add&amp;localPath=/root/folder1"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://put?accessToken=XXX&amp;clientIdentifier=XXX&amp;uploadMode=add&amp;localPath=/root/folder1&amp;remotePath=/root/folder2"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre><p>And to upload a single file with content from the message body</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
   .setHeader(DropboxConstants.HEADER_PUT_FILE_NAME, constant(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myfile.txt"</em></strong>))
   .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://put?accessToken=XXX&amp;clientIdentifier=XXX&amp;uploadMode=add&amp;remotePath=/root/folder2"</em></strong>)
   .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre><p>The name of the file can be provided in the header <code class="literal">DropboxConstants.HEADER_PUT_FILE_NAME</code>
or <code class="literal">Exchange.FILE_NAME</code> in that order of precedence. If no header has been provided then the message id (uuid) is
used as the file name.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_headers_4"></a>Result Message Headers</h3></div></div></div><p>The following headers are set on message result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Value</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">UPLOADED_FILE</code></p></td><td align="left" valign="top"><p>in case of single file upload, path of the remote path uploaded</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">UPLOADED_FILES</code></p></td><td align="left" valign="top"><p>in case of multiple files upload, string with the remote paths uploaded</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_body_4"></a>Result Message Body</h3></div></div></div><p>The following objects are set on message body result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Object type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>in case of single file upload, result of the upload operation, OK or KO</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Map&lt;String, DropboxResultCode&gt;</code></p></td><td align="left" valign="top"><p>in case of multiple files upload, a map with as key the path of the
remote file uploaded and as value the result of the upload operation, OK
or KO</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_search_operation"></a>Search operation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="dropbox-component.html#_samples_13">Samples</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_headers_5">Result Message Headers</a></span></dt><dt><span class="section"><a href="dropbox-component.html#_result_message_body_5">Result Message Body</a></span></dt></dl></div><p>Search inside a remote Dropbox folder including its sub directories.</p><p>Works as Camel producer and as Camel consumer.</p><p>Below are listed the options for this operation:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="20%" class="col_1"><col width="20%" class="col_2"><col width="60%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Mandatory</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">remotePath</code></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>Folder on Dropbox where to search in.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">query</code></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>A space-separated list of sub-strings to search for. A file matches only
if it contains all the sub-strings. If this option is not set, all files
will be matched. The query is required to be provided in either the endpoint configuration
or as a header <code class="literal">CamelDropboxQuery</code> on the Camel message.</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_samples_13"></a>Samples</h3></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://search?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/XXX&amp;query=XXX"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .setHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelDropboxQuery"</em></strong>, constant(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"XXX"</em></strong>))
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"dropbox://search?accessToken=XXX&amp;clientIdentifier=XXX&amp;remotePath=/XXX"</em></strong>)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_headers_5"></a>Result Message Headers</h3></div></div></div><p>The following headers are set on message result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Property</th><th align="left" valign="top">Value</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">FOUNDED_FILES</code></p></td><td align="left" valign="top"><p>list of file path founded</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_result_message_body_5"></a>Result Message Body</h3></div></div></div><p>The following objects are set on message body result:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Object type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">List&lt;DbxEntry&gt;</code></p></td><td align="left" valign="top"><p>list of file path founded. For more information on this object refer to
Dropbox documentation,</p></td></tr></tbody></table></div><p>&nbsp;</p></div></div></div></body></html>
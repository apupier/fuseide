<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>XML JSon DataFormat (deprecated)</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="xmlBeans-dataformat.html" title="XML Beans DataFormat (deprecated)"><link rel="next" href="xmlrpc-component.html" title="XML RPC Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="xmljson-dataformat"></a>XML JSon DataFormat (deprecated)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="xmljson-dataformat.html#_options_166">Options</a></span></dt><dt><span class="section"><a href="xmljson-dataformat.html#_basic_usage_with_java_dsl">Basic Usage with Java DSL</a></span></dt><dt><span class="section"><a href="xmljson-dataformat.html#_basic_usage_with_spring_or_blueprint_dsl">Basic usage with Spring or Blueprint DSL</a></span></dt><dt><span class="section"><a href="xmljson-dataformat.html#_namespace_mappings">Namespace mappings</a></span></dt><dt><span class="section"><a href="xmljson-dataformat.html#_dependencies_69">Dependencies</a></span></dt><dt><span class="section"><a href="xmljson-dataformat.html#_see_also_145">See Also</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.10</strong></span></p><p>Camel already supports a number of data formats to perform XML and
JSON-related conversions, but all of them require a POJO either as an
input (for marshalling) or produce a POJO as output (for unmarshalling).
This data format provides the capability to convert from XML to JSON and
vice-versa directly, without stepping through intermediate POJOs.</p><p>This data format leverages the
<a class="link" href="http://json-lib.sourceforge.net/" target="_top">Json-lib</a> library to achieve direct
conversion. In this context, XML is considered the high-level format,
while JSON is the low-level format. Hence, the marshal/unmarshal
semantics are assigned as follows:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">marshalling &#8658; converting from XML to JSON</li><li class="listitem">unmarshalling &#8658; converting from JSON to XML.</li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_166"></a>Options</h2></div></div></div><p>The XML JSon dataformat supports 13 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>encoding</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the encoding. Used for unmarshalling (JSON to XML conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>elementName</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Specifies the name of the XML elements representing each array element. Used for unmarshalling (JSON to XML conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>arrayName</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Specifies the name of the top-level XML element. Used for unmarshalling (JSON to XML conversion). For example, when converting 1, 2, 3, it will be output by default as 123. By setting this option or rootName, you can alter the name of element 'a'.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>forceTopLevelObject</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Determines whether the resulting JSON will start off with a top-most element whose name matches the XML root element. Used for marshalling (XML to JSon conversion). If disabled, XML string 12 turns into 'x: '1', 'y': '2' . Otherwise, it turns into 'a': 'x: '1', 'y': '2' .</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>namespaceLenient</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Flag to be tolerant to incomplete namespace prefixes. Used for unmarshalling (JSON to XML conversion). In most cases, json-lib automatically changes this flag at runtime to match the processing.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>rootName</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Specifies the name of the top-level element. Used for unmarshalling (JSON to XML conversion). If not set, json-lib will use arrayName or objectName (default value: 'o', at the current time it is not configurable in this data format). If set to 'root', the JSON string 'x': 'value1', 'y' : 'value2' would turn into value1value2, otherwise the 'root' element would be named 'o'.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>skipWhitespace</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Determines whether white spaces between XML elements will be regarded as text values or disregarded. Used for marshalling (XML to JSon conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>trimSpaces</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Determines whether leading and trailing white spaces will be omitted from String values. Used for marshalling (XML to JSon conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>skipNamespaces</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Signals whether namespaces should be ignored. By default they will be added to the JSON output using xmlns elements. Used for marshalling (XML to JSon conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>removeNamespacePrefixes</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Removes the namespace prefixes from XML qualified elements, so that the resulting JSON string does not contain them. Used for marshalling (XML to JSon conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>expandableProperties</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">List</code></p></td><td align="left" valign="top"><p>With expandable properties, JSON array elements are converted to XML as a sequence of repetitive XML elements with the local name equal to the JSON key, for example: number: 1,2,3 , normally converted to: 123 (where e can be modified by setting elementName), would instead translate to 123, if number is set as an expandable property Used for unmarshalling (JSON to XML conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>typeHints</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Adds type hints to the resulting XML to aid conversion back to JSON. Used for unmarshalling (JSON to XML conversion).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_basic_usage_with_java_dsl"></a>Basic Usage with Java DSL</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="xmljson-dataformat.html#_explicitly_instantiating_the_data_format">Explicitly instantiating the data format</a></span></dt><dt><span class="section"><a href="xmljson-dataformat.html#_defining_the_data_format_in_line">Defining the data format in-line</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_explicitly_instantiating_the_data_format"></a>Explicitly instantiating the data format</h3></div></div></div><p>Just instantiate the <code class="literal">XmlJsonDataFormat</code> from package
<code class="literal">org.apache.camel.dataformat.xmljson</code>. Make sure you have installed the
<code class="literal">camel-xmljson</code> feature (if running on OSGi) or that you&#8217;ve included
<code class="literal">camel-xmljson-7.0.jar</code> and its transitive dependencies in your
classpath. Example initialization with a default configuration:</p><pre class="programlisting">XmlJsonDataFormat xmlJsonFormat = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> XmlJsonDataFormat();</pre><p>To tune the behaviour of the data format as per the options above, use
the appropriate setters:</p><pre class="programlisting">XmlJsonDataFormat xmlJsonFormat = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> XmlJsonDataFormat();
xmlJsonFormat.setEncoding(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"UTF-8"</em></strong>);
xmlJsonFormat.setForceTopLevelObject(true);
xmlJsonFormat.setTrimSpaces(true);
xmlJsonFormat.setRootName(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"newRoot"</em></strong>);
xmlJsonFormat.setSkipNamespaces(true);
xmlJsonFormat.setRemoveNamespacePrefixes(true);
xmlJsonFormat.setExpandableProperties(Arrays.asList(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"d"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"e"</em></strong>));</pre><p>Once you&#8217;ve instantiated the data format, the next step is to actually
use the it from within the <code class="literal">marshal()</code> and <code class="literal">unmarshal()</code> DSL elements:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// from XML to JSON</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:marshal"</em></strong>).marshal(xmlJsonFormat).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:json"</em></strong>);
<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// from JSON to XML</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:unmarshal"</em></strong>).unmarshal(xmlJsonFormat).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:xml"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_defining_the_data_format_in_line"></a>Defining the data format in-line</h3></div></div></div><p>Alternatively, you can define the data format inline by using the
<code class="literal">xmljson()</code> DSL element:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// from XML to JSON - inline dataformat</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:marshalInline"</em></strong>).marshal().xmljson().to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:jsonInline"</em></strong>);
<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// from JSON to XML - inline dataformat</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:unmarshalInline"</em></strong>).unmarshal().xmljson().to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:xmlInline"</em></strong>);</pre><p>If you wish, you can even pass in a <code class="literal">Map&lt;String, String&gt;</code> to the inline
methods to provide custom options:</p><pre class="programlisting">Map&lt;String, String&gt; xmlJsonOptions = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> HashMap&lt;String, String&gt;();
xmlJsonOptions.put(org.apache.camel.model.dataformat.XmlJsonDataFormat.ENCODING, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"UTF-8"</em></strong>);
xmlJsonOptions.put(org.apache.camel.model.dataformat.XmlJsonDataFormat.ROOT_NAME, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"newRoot"</em></strong>);
xmlJsonOptions.put(org.apache.camel.model.dataformat.XmlJsonDataFormat.SKIP_NAMESPACES, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"true"</em></strong>);
xmlJsonOptions.put(org.apache.camel.model.dataformat.XmlJsonDataFormat.REMOVE_NAMESPACE_PREFIXES, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"true"</em></strong>);
xmlJsonOptions.put(org.apache.camel.model.dataformat.XmlJsonDataFormat.EXPANDABLE_PROPERTIES, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"d e"</em></strong>);

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// from XML to JSON - inline dataformat w/ options</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:marshalInlineOptions"</em></strong>).marshal().xmljson(xmlJsonOptions).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:jsonInlineOptions"</em></strong>);
<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// form JSON to XML - inline dataformat w/ options</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:unmarshalInlineOptions"</em></strong>).unmarshal().xmljson(xmlJsonOptions).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:xmlInlineOptions"</em></strong>);</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_basic_usage_with_spring_or_blueprint_dsl"></a>Basic usage with Spring or Blueprint DSL</h2></div></div></div><p>Within the <code class="literal">&lt;dataFormats&gt;</code> block, simply configure an <code class="literal">xmljson</code> element
with unique IDs:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dataFormats&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;xmljson</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"xmljson"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;xmljson</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"xmljsonWithOptions"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">forceTopLevelObject</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">trimSpaces</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">rootName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"newRoot"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">skipNamespaces</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span>
             <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">removeNamespacePrefixes</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">expandableProperties</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"d e"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dataFormats&gt;</strong></pre><p>Then you simply refer to the data format object within your
<code class="literal">&lt;marshal /&gt;</code> and <code class="literal">&lt;unmarshal /&gt;</code> DSLs:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:marshal"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;marshal</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"xmljson"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:json"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:unmarshalWithOptions"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;unmarshal</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"xmljsonWithOptions"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:xmlWithOptions"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>Enabling XML DSL autocompletion for this component is easy: just refer
to the appropriate <a class="link" href="http://camel.apache.org/xml-reference.html" target="_top">Schema
locations</a>, depending on whether you&#8217;re using
<a class="link" href="http://camel.apache.org/schema/spring/" target="_top">Spring</a> or
<a class="link" href="http://camel.apache.org/schema/blueprint/" target="_top">Blueprint</a> DSL. Remember that
this data format is available from Camel 2.10 onwards, so only schemas
from that version onwards will include these new XML elements and
attributes.</p><p>The syntax with Blueprint is
identical to that of the Spring DSL. Just ensure the correct namespaces
and schemaLocations are in use.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_namespace_mappings"></a>Namespace mappings</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="xmljson-dataformat.html#_example_23">Example</a></span></dt></dl></div><p>XML has namespaces to fully qualify elements and attributes; JSON
doesn&#8217;t. You need to take this into account when performing XML-JSON
conversions.</p><p>To bridge the gap, <a class="link" href="http://json-lib.sourceforge.net/" target="_top">Json-lib</a> has an
option to bind namespace declarations in the form of prefixes and
namespace URIs to XML output elements while unmarshalling (i.e.
converting from JSON to XML). For example, provided the following JSON
string:</p><pre class="programlisting">{ "pref1:a": "value1", "pref2:b": "value2" }</pre><p>you can ask Json-lib to output namespace declarations on elements
<code class="literal">pref1:a</code> and <code class="literal">pref2:b</code> to bind the prefixes <code class="literal">pref1</code> and <code class="literal">pref2</code> to
specific namespace URIs.</p><p>To use this feature, simply create
<code class="literal">XmlJsonDataFormat.NamespacesPerElementMapping</code> objects and add them to
the <code class="literal">namespaceMappings</code> option (which is a <code class="literal">List</code>).</p><p>The <code class="literal">XmlJsonDataFormat.NamespacesPerElementMapping</code> holds an element
name and a Map of [prefix &#8658; namespace URI]. To facilitate mapping
multiple prefixes and namespace URIs, the
<code class="literal">NamespacesPerElementMapping(String element, String pipeSeparatedMappings)</code>
constructor takes a String-based pipe-separated sequence of [prefix,
namespaceURI] pairs in the following way:
<code class="literal">|ns2|http://camel.apache.org/personalData|ns3|http://camel.apache.org/personalData2|</code>.</p><p>In order to define a default namespace, just leave the corresponding key
field empty:
<code class="literal">|ns1|http://camel.apache.org/test1||http://camel.apache.org/default|</code>.</p><p>Binding namespace declarations to an element name = empty string will
attach those namespaces to the root element.</p><p>The full code would look like that:</p><pre class="programlisting">XmlJsonDataFormat namespacesFormat = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> XmlJsonDataFormat();
List&lt;XmlJsonDataFormat.NamespacesPerElementMapping&gt; namespaces = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> ArrayList&lt;XmlJsonDataFormat.NamespacesPerElementMapping&gt;();
namespaces.add(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> XmlJsonDataFormat.
                       NamespacesPerElementMapping(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">""</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"|ns1|http://camel.apache.org/test1||http://camel.apache.org/default|"</em></strong>));
namespaces.add(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> XmlJsonDataFormat.
                       NamespacesPerElementMapping(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"surname"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"|ns2|http://camel.apache.org/personalData|"</em></strong> +
                           <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"ns3|http://camel.apache.org/personalData2|"</em></strong>));
namespacesFormat.setNamespaceMappings(namespaces);
namespacesFormat.setRootElement(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"person"</em></strong>);</pre><p>And you can achieve the same in Spring DSL.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_example_23"></a>Example</h3></div></div></div><p>Using the namespace bindings in the Java snippet above on the following
JSON string:</p><pre class="programlisting">{ "name": "Raul", "surname": "Kripalani", "f": true, "g": null}</pre><p>&nbsp;</p><p>Would yield the following XML:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;person</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/default"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:ns1</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/test1"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;f&gt;</strong>true<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/f&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;g</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">null</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;name&gt;</strong>Raul<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/name&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;surname</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:ns2</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/personalData"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:ns3</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/personalData2"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>Kripalani<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/surname&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/person&gt;</strong></pre><p>Remember that the JSON spec defines a JSON object as follows:</p><div class="blockquote"><blockquote class="blockquote"><p>An object is an unordered set of name/value pairs. [&#8230;&#8203;].</p></blockquote></div><p>That&#8217;s why the elements are in a different order in the output XML.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_69"></a>Dependencies</h2></div></div></div><p>To use the <a class="link" href="xmljson-dataformat.html" title="XML JSon DataFormat (deprecated)">XmlJson</a> dataformat in your camel routes
you need to add the following dependency to your pom:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-xmljson<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
  <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- Use the same version as camel-core, but remember that this component is only available from 2.10 onwards --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong>

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- And also XOM must be included. XOM cannot be included by default due to an incompatible
license with ASF; so add this manually --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>xom<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>xom<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>1.2.5<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_see_also_145"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Data Format</li><li class="listitem"><a class="link" href="http://json-lib.sourceforge.net/" target="_top">json-lib</a></li></ul></div></div></div></body></html>
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Zipkin Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="zipfile-dataformat.html" title="Zip File DataFormat"><link rel="next" href="camel-zipkin-Options.html" title="Options"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="Zipkin-ZipkinComponent"></a>Zipkin Component</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.18</strong></span></p><p>The camel-zipkin component is used for tracing and timing incoming and
outgoing Camel messages using <a class="link" href="http://zipkin.io/" target="_top">zipkin</a>.</p><p>Events (span) are captured for incoming and outgoing messages being sent
to/from Camel.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>camel-zipkin is planned to be refactored in Camel 2.22.0 to not use zipkin-scribe
but use the default http transport. This work may cause backwards incompatibility.</p></td></tr></table></div><p>This means you need to configure which Camel endpoints map
to zipkin service names.</p><p>The mapping can be configured using:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">route id - A Camel route id</li><li class="listitem">endpoint url - A Camel endpoint url</li></ul></div><p>For both kinds you can match using wildcards and regular expressions,
using the rules from&nbsp;Intercept.</p><p>To match all Camel messages you can use * in the pattern and configure
that to the same service name.</p><p>If no mapping has been configured, Camel will fallback and use
endpoint uri&#8217;s as service names.&nbsp;
However, it&#8217;s recommended to configure service mappings so you can use
human-readable names instead of Camel&nbsp;endpoint uris in the names.</p><p>Camel will auto-configure a span reporter one hasn&#8217;t been explicitly configured,
and if the hostname and port to a zipkin collector has been configured as environment variables</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">ZIPKIN_COLLECTOR_HTTP_SERVICE_HOST - The http hostname</li><li class="listitem">ZIPKIN_COLLECTOR_HTTP_SERVICE_PORT - The port number</li></ul></div><p>or</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">ZIPKIN_COLLECTOR_THRIFT_SERVICE_HOST - The Scribe (Thrift RPC) hostname</li><li class="listitem">ZIPKIN_COLLECTOR_THRIFT_SERVICE_PORT - The port number</li></ul></div><p>This makes it easy to use camel-zipkin in container platforms where the
platform can run your application in a linux container where service
configurations are provided as environment variables.</p></div></body></html>
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Elasticsearch5 Component (deprecated)</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="elasticsearch-component.html" title="Elasticsearch Component (deprecated)"><link rel="next" href="el-language.html" title="EL Language (deprecated)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="elasticsearch5-component"></a>Elasticsearch5 Component (deprecated)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="elasticsearch5-component.html#_uri_format_67">URI format</a></span></dt><dt><span class="section"><a href="elasticsearch5-component.html#_endpoint_options_2">Endpoint Options</a></span></dt><dt><span class="section"><a href="elasticsearch5-component.html#_message_operations_2">Message Operations</a></span></dt><dt><span class="section"><a href="elasticsearch5-component.html#_index_example_2">Index Example</a></span></dt><dt><span class="section"><a href="elasticsearch5-component.html#_for_more_information_see_these_resources_2">For more information, see these resources</a></span></dt><dt><span class="section"><a href="elasticsearch5-component.html#_see_also_42">See Also</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.19</strong></span></p><p>The ElasticSearch component allows you to interface with an
<a class="link" href="https://www.elastic.co/products/elasticsearch" target="_top">ElasticSearch</a> 5.x API.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-elasticsearch5<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_67"></a>URI format</h2></div></div></div><pre class="programlisting">elasticsearch5:<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//clusterName[?options]</em></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_endpoint_options_2"></a>Endpoint Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="elasticsearch5-component.html#_path_parameters_1_parameters_57">Path Parameters (1 parameters):</a></span></dt><dt><span class="section"><a href="elasticsearch5-component.html#_query_parameters_16_parameters_3">Query Parameters (16 parameters):</a></span></dt></dl></div><p>The Elasticsearch5 component supports 2 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>client</strong></span> (advanced)</p></td><td align="left" valign="top"><p>To use an existing configured Elasticsearch client, instead of creating a client per endpoint. This allow to customize the client with specific settings.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>TransportClient</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>resolveProperty Placeholders</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Whether the component should resolve property placeholders on itself when starting. Only properties which are of String type can use property placeholders.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div><p>The Elasticsearch5 endpoint is configured using URI syntax:</p><pre class="screen">elasticsearch5:clusterName</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_1_parameters_57"></a>Path Parameters (1 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>clusterName</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Name of the cluster</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_16_parameters_3"></a>Query Parameters (16 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>clientTransportSniff</strong></span> (producer)</p></td><td align="left" valign="top"><p>Is the client allowed to sniff the rest of the cluster or not. This setting map to the client.transport.sniff setting.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>indexName</strong></span> (producer)</p></td><td align="left" valign="top"><p>The name of the index to act against</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>indexType</strong></span> (producer)</p></td><td align="left" valign="top"><p>The type of the index to act against</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ip</strong></span> (producer)</p></td><td align="left" valign="top"><p>The TransportClient remote host ip to use</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>operation</strong></span> (producer)</p></td><td align="left" valign="top"><p>What operation to perform</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ElasticsearchOperation</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>pingSchedule</strong></span> (producer)</p></td><td align="left" valign="top"><p>The time(in unit) the client ping the cluster.</p></td><td align="center" valign="top"><p>5s</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>pingTimeout</strong></span> (producer)</p></td><td align="left" valign="top"><p>The time(in unit) to wait for a ping response from a node too return.</p></td><td align="center" valign="top"><p>5s</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>port</strong></span> (producer)</p></td><td align="left" valign="top"><p>The TransportClient remote port to use (defaults to 9300)</p></td><td align="center" valign="top"><p>9300</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>tcpCompress</strong></span> (producer)</p></td><td align="left" valign="top"><p>true if compression (LZF) enable between all nodes.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>tcpConnectTimeout</strong></span> (producer)</p></td><td align="left" valign="top"><p>The time( in unit) to wait for connection timeout.</p></td><td align="center" valign="top"><p>30s</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>transportAddresses</strong></span> (producer)</p></td><td align="left" valign="top"><p>Comma separated list with ip:port formatted remote transport addresses to use. The ip and port options must be left blank for transportAddresses to be considered instead.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>waitForActiveShards</strong></span> (producer)</p></td><td align="left" valign="top"><p>Index creation waits for the write consistency number of shards to be available</p></td><td align="center" valign="top"><p>1</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>enableSSL</strong></span> (security)</p></td><td align="left" valign="top"><p>Enable SSL. Require XPack client jar on the classpath</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>password</strong></span> (authentication)</p></td><td align="left" valign="top"><p>Password for authenticate against the cluster. Require XPack client jar on the classpath</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>user</strong></span> (authentication)</p></td><td align="left" valign="top"><p>User for authenticate against the cluster. Requires transport_client role for accessing the cluster. Require XPack client jar on the classpath</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_message_operations_2"></a>Message Operations</h2></div></div></div><p>The following ElasticSearch operations are currently supported. Simply
set an endpoint URI option or exchange header with a key of "operation"
and a value set to one of the following. Some operations also require
other parameters or the message body to be set.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">operation</th><th align="left" valign="top">message body</th><th align="left" valign="top">description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>INDEX</p></td><td align="left" valign="top"><p>Map, String, byte[] or XContentBuilder content to index</p></td><td align="left" valign="top"><p>Adds content to an index and returns the content&#8217;s indexId in the body.
You can set the indexId by setting the message header with
the key "indexId".</p></td></tr><tr><td align="left" valign="top"><p>GET_BY_ID</p></td><td align="left" valign="top"><p>index id of content to retrieve</p></td><td align="left" valign="top"><p>Retrieves the specified index and returns a GetResult object in the body</p></td></tr><tr><td align="left" valign="top"><p>DELETE</p></td><td align="left" valign="top"><p>index name and type of content to delete</p></td><td align="left" valign="top"><p>Deletes the specified indexName and indexType and returns a DeleteResponse object in the
body</p></td></tr><tr><td align="left" valign="top"><p>DELETE_INDEX</p></td><td align="left" valign="top"><p>index name of content to delete</p></td><td align="left" valign="top"><p>Deletes the specified indexName and returns a DeleteIndexResponse object in the
body</p></td></tr><tr><td align="left" valign="top"><p>BULK_INDEX</p></td><td align="left" valign="top"><p>a&nbsp;<span class="strong"><strong>List</strong></span>&nbsp;or <span class="strong"><strong>Collection</strong></span> of any type that is already accepted
(XContentBuilder, Map, byte[], String)</p></td><td align="left" valign="top"><p>Adds content to an index and return a&nbsp;List of the id&nbsp;of the
successfully indexed documents in the body</p></td></tr><tr><td align="left" valign="top"><p>BULK</p></td><td align="left" valign="top"><p>a&nbsp;<span class="strong"><strong>List</strong></span>&nbsp;or <span class="strong"><strong>Collection</strong></span> of any type that is already accepted
(XContentBuilder, Map, byte[], String)</p></td><td align="left" valign="top"><p>Adds content to an index and returns the BulkResponse
object in the body</p></td></tr><tr><td align="left" valign="top"><p>SEARCH</p></td><td align="left" valign="top"><p>Map, String or SearchRequest Object</p></td><td align="left" valign="top"><p>Search the content with the map of query string</p></td></tr><tr><td align="left" valign="top"><p>MULTIGET</p></td><td align="left" valign="top"><p>List of MultigetRequest.Item object</p></td><td align="left" valign="top"><p>Retrieves the specified indexes, types etc. in
MultigetRequest and returns a MultigetResponse object in the body</p></td></tr><tr><td align="left" valign="top"><p>MULTISEARCH</p></td><td align="left" valign="top"><p>List of SearchRequest object</p></td><td align="left" valign="top"><p>Search for parameters specified in MultiSearchRequest and
returns a MultiSearchResponse object in the body</p></td></tr><tr><td align="left" valign="top"><p>EXISTS</p></td><td align="left" valign="top"><p>Index name as header</p></td><td align="left" valign="top"><p>Checks the index exists or not and returns a Boolean flag in the body</p></td></tr><tr><td align="left" valign="top"><p>UPDATE</p></td><td align="left" valign="top"><p>Map, String, byte[] or XContentBuilder content to update</p></td><td align="left" valign="top"><p>Updates content to an index and returns the content&#8217;s
indexId in the body.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_index_example_2"></a>Index Example</h2></div></div></div><p>Below is a simple INDEX example</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:index"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"elasticsearch5://elasticsearch?operation=INDEX&amp;indexName=twitter&amp;indexType=tweet"</em></strong>);</pre><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:index"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"elasticsearch5://elasticsearch?operation=INDEX&amp;indexName=twitter&amp;indexType=tweet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>A client would simply need to pass a body message containing a Map to
the route. The result body contains the indexId created.</p><pre class="programlisting">Map&lt;String, String&gt; map = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> HashMap&lt;String, String&gt;();
map.put(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"content"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"test"</em></strong>);
String indexId = template.requestBody(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:index"</em></strong>, map, String.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_for_more_information_see_these_resources_2"></a>For more information, see these resources</h2></div></div></div><p><a class="link" href="http://www.elastic.co" target="_top">Elastic Main Site</a></p><p><a class="link" href="https://www.elastic.co/guide/en/elasticsearch/client/java-api/current/java-api.html" target="_top">ElasticSearch Java API</a></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_see_also_42"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Configuring Camel</li><li class="listitem">Component</li><li class="listitem">Endpoint</li><li class="listitem">Getting Started</li></ul></div></div></div></body></html>
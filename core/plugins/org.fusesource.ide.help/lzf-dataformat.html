<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>LZF Deflate Compression DataFormat</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="lumberjack-component.html" title="Lumberjack Component"><link rel="next" href="mail-component.html" title="Mail Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="lzf-dataformat"></a>LZF Deflate Compression DataFormat</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="lzf-dataformat.html#_options_93">Options</a></span></dt><dt><span class="section"><a href="lzf-dataformat.html#_marshal_2">Marshal</a></span></dt><dt><span class="section"><a href="lzf-dataformat.html#_unmarshal_3">Unmarshal</a></span></dt><dt><span class="section"><a href="lzf-dataformat.html#_dependencies_48">Dependencies</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.17</strong></span></p><p>The
LZF&nbsp;<a class="link" href="https://cwiki.apache.org/confluence/display/CAMEL/Data+Format" target="_top">Data
Format</a>&nbsp;is a message compression and de-compression format. It uses the
LZF deflate algorithm.&nbsp;Messages marshalled using LZF compression can be
unmarshalled using LZF decompression just prior to being consumed at the
endpoint. The compression capability is quite useful when you deal with
large XML and Text based payloads or when you read messages previously
comressed using LZF algotithm.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_93"></a>Options</h2></div></div></div><p>The LZF Deflate Compression dataformat supports 2 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>usingParallelCompression</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Enable encoding (compress) using multiple processing cores.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_marshal_2"></a>Marshal</h2></div></div></div><p>In this example we marshal a regular text/XML payload to a compressed
payload employing LZF compression format and send it an ActiveMQ queue
called MY_QUEUE.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).marshal().lzf().to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:MY_QUEUE"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_unmarshal_3"></a>Unmarshal</h2></div></div></div><p>In this example we unmarshal&nbsp;a LZF payload from an ActiveMQ queue called
MY_QUEUE&nbsp;to its original format,&nbsp;and forward it for&nbsp;processing&nbsp;to
the&nbsp;<code class="literal">UnGZippedMessageProcessor</code>.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:MY_QUEUE"</em></strong>).unmarshal().lzf().process(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> UnCompressedMessageProcessor());</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_48"></a>Dependencies</h2></div></div></div><p>To useLZF compression in your camel routes you need to add a dependency
on&nbsp;<span class="strong"><strong>camel-lzf</strong></span>&nbsp;which implements this data format.</p><p>If you use Maven you can just add the following to your&nbsp;<code class="literal">pom.xml</code>,
substituting the version number for the latest &amp; greatest release
(see&nbsp;<a class="link" href="https://cwiki.apache.org/confluence/display/CAMEL/Download" target="_top">the
download page for the latest versions</a>).</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-lzf<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
  <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre></div></div></body></html>
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>REST Swagger Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="rest-component.html" title="REST Component"><link rel="next" href="restlet-component.html" title="Restlet Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="rest-swagger-component"></a>REST Swagger Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="rest-swagger-component.html#_uri_format_159">URI format</a></span></dt><dt><span class="section"><a href="rest-swagger-component.html#_options_121">Options</a></span></dt><dt><span class="section"><a href="rest-swagger-component.html#_example_petstore">Example: PetStore</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.19</strong></span></p><p>The <span class="strong"><strong>rest-swagger</strong></span> configures rest producers from
<a class="link" href="http://swagger.io/" target="_top">Swagger</a> (Open API) specification document and
delegates to a component implementing the <span class="emphasis"><em>RestProducerFactory</em></span>
interface. Currently known working components are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="http-component.html" title="HTTP Component (deprecated)">http</a></li><li class="listitem"><a class="link" href="http4-component.html" title="HTTP4 Component">http4</a></li><li class="listitem"><a class="link" href="netty4-http-component.html" title="Netty4 HTTP Component">netty4-http</a></li><li class="listitem"><a class="link" href="restlet-component.html" title="Restlet Component">restlet</a></li><li class="listitem"><a class="link" href="jetty-component.html" title="Jetty 9 Component">jetty</a></li><li class="listitem"><a class="link" href="undertow-component.html" title="Undertow Component">undertow</a></li></ul></div><p>Maven users will need to add the following dependency to their
<code class="literal">pom.xml</code> for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-rest-swagger<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_159"></a>URI format</h2></div></div></div><pre class="programlisting">rest-swagger:[specificationPath#]operationId</pre><p>Where <code class="literal">operationId</code> is the ID of the operation in the Swagger
specification, and <code class="literal">specificationPath</code> is the path to the
specification.
If the <code class="literal">specificationPath</code> is not specified it defaults to
<code class="literal">swagger.json</code>. The lookup mechanism uses Camels <code class="literal">ResourceHelper</code> to
load the resource, which means that you can use CLASSPATH resources
(<code class="literal">classpath:my-specification.json</code>), files
(<code class="literal">file:/some/path.json</code>), the web
(<code class="literal"><a class="link" href="http://api.example.com/swagger.json" target="_top">http://api.example.com/swagger.json</a></code>) or reference a bean
(<code class="literal">ref:nameOfBean</code>) or use a method of a bean
(<code class="literal">bean:nameOfBean.methodName</code>) to get the specification resource,
failing that Swagger&#8217;s own resource loading support.</p><p>This component does not act as a HTTP client, it delegates that to
another component mentioned above. The lookup mechanism searches for a
single component that implements the <span class="emphasis"><em>RestProducerFactory</em></span> interface and
uses that. If the CLASSPATH contains more than one, then the property
<code class="literal">componentName</code> should be set to indicate which component to delegate
to.</p><p>Most of the configuration is taken from the Swagger specification but
the option exists to override those by specifying them on the component
or on the endpoint. Typically you would just need to override the
<code class="literal">host</code> or <code class="literal">basePath</code> if those differ from the specification.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <code class="literal">host</code> parameter should contain the absolute URI containing
scheme, hostname and port number, for instance:
<code class="literal"><a class="link" href="https://api.example.com" target="_top">https://api.example.com</a></code></p></td></tr></table></div><p>With <code class="literal">componentName</code> you specify what component is used to perform the
requests, this named component needs to be present in the Camel context
and implement the required <span class="emphasis"><em>RestProducerFactory</em></span> interface&#8201;&#8212;&#8201;as do the
components listed at the top.</p><p>If you do not specify the <span class="emphasis"><em>componentName</em></span> at either component or
endpoint level, CLASSPATH is searched for a suitable delegate. There
should be only one component present on the CLASSPATH that implements
the <span class="emphasis"><em>RestProducerFactory</em></span> interface for this to work.</p><p>This component&#8217;s endpoint URI is lenient which means that in addition
to message headers you can specify REST operation&#8217;s parameters as
endpoint parameters, these will be constant for all subsequent
invocations so it makes sense to use this feature only for parameters
that are indeed constant for all invocations&#8201;&#8212;&#8201;for example API version
in path such as <code class="literal">/api/7.0/users/{id}</code>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_121"></a>Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="rest-swagger-component.html#_path_parameters_2_parameters_40">Path Parameters (2 parameters):</a></span></dt><dt><span class="section"><a href="rest-swagger-component.html#_query_parameters_6_parameters_11">Query Parameters (6 parameters):</a></span></dt></dl></div><p>The REST Swagger component supports 7 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>basePath</strong></span> (producer)</p></td><td align="left" valign="top"><p>API basePath, for example /v2. Default is unset, if set overrides the value present in Swagger specification.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>componentName</strong></span> (producer)</p></td><td align="left" valign="top"><p>Name of the Camel component that will perform the requests. The compnent must be present in Camel registry and it must implement RestProducerFactory service provider interface. If not set CLASSPATH is searched for single component that implements RestProducerFactory SPI. Can be overriden in endpoint configuration.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>consumes</strong></span> (producer)</p></td><td align="left" valign="top"><p>What payload type this component capable of consuming. Could be one type, like application/json or multiple types as application/json, application/xml; q=0.5 according to the RFC7231. This equates to the value of Accept HTTP header. If set overrides any value found in the Swagger specification. Can be overriden in endpoint configuration</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>host</strong></span> (producer)</p></td><td align="left" valign="top"><p>Scheme hostname and port to direct the HTTP requests to in the form of <a class="link" href="https://hostname:port" target="_top">https://hostname:port</a>. Can be configured at the endpoint, component or in the correspoding REST configuration in the Camel Context. If you give this component a name (e.g. petstore) that REST configuration is consulted first, rest-swagger next, and global configuration last. If set overrides any value found in the Swagger specification, RestConfiguration. Can be overriden in endpoint configuration.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>produces</strong></span> (producer)</p></td><td align="left" valign="top"><p>What payload type this component is producing. For example application/json according to the RFC7231. This equates to the value of Content-Type HTTP header. If set overrides any value present in the Swagger specification. Can be overriden in endpoint configuration.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>specificationUri</strong></span> (producer)</p></td><td align="left" valign="top"><p>Path to the Swagger specification file. The scheme, host base path are taken from this specification, but these can be overriden with properties on the component or endpoint level. If not given the component tries to load swagger.json resource. Note that the host defined on the component and endpoint of this Component should contain the scheme, hostname and optionally the port in the URI syntax (i.e. <a class="link" href="https://api.example.com:8080" target="_top">https://api.example.com:8080</a>). Can be overriden in endpoint configuration.</p></td><td align="center" valign="top"><p>swagger.json</p></td><td align="left" valign="top"><p>URI</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>resolveProperty Placeholders</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Whether the component should resolve property placeholders on itself when starting. Only properties which are of String type can use property placeholders.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div><p>The REST Swagger endpoint is configured using URI syntax:</p><pre class="screen">rest-swagger:specificationUri#operationId</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_2_parameters_40"></a>Path Parameters (2 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>specificationUri</strong></span></p></td><td align="left" valign="top"><p>Path to the Swagger specification file. The scheme, host base path are taken from this specification, but these can be overriden with properties on the component or endpoint level. If not given the component tries to load swagger.json resource. Note that the host defined on the component and endpoint of this Component should contain the scheme, hostname and optionally the port in the URI syntax (i.e. <a class="link" href="https://api.example.com:8080" target="_top">https://api.example.com:8080</a>). Overrides component configuration.</p></td><td align="center" valign="top"><p>swagger.json</p></td><td align="left" valign="top"><p>URI</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>operationId</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> ID of the operation from the Swagger specification.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_6_parameters_11"></a>Query Parameters (6 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>basePath</strong></span> (producer)</p></td><td align="left" valign="top"><p>API basePath, for example /v2. Default is unset, if set overrides the value present in Swagger specification and in the component configuration.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>componentName</strong></span> (producer)</p></td><td align="left" valign="top"><p>Name of the Camel component that will perform the requests. The compnent must be present in Camel registry and it must implement RestProducerFactory service provider interface. If not set CLASSPATH is searched for single component that implements RestProducerFactory SPI. Overrides component configuration.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>consumes</strong></span> (producer)</p></td><td align="left" valign="top"><p>What payload type this component capable of consuming. Could be one type, like application/json or multiple types as application/json, application/xml; q=0.5 according to the RFC7231. This equates to the value of Accept HTTP header. If set overrides any value found in the Swagger specification and. in the component configuration</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>host</strong></span> (producer)</p></td><td align="left" valign="top"><p>Scheme hostname and port to direct the HTTP requests to in the form of <a class="link" href="https://hostname:port" target="_top">https://hostname:port</a>. Can be configured at the endpoint, component or in the correspoding REST configuration in the Camel Context. If you give this component a name (e.g. petstore) that REST configuration is consulted first, rest-swagger next, and global configuration last. If set overrides any value found in the Swagger specification, RestConfiguration. Overrides all other configuration.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>produces</strong></span> (producer)</p></td><td align="left" valign="top"><p>What payload type this component is producing. For example application/json according to the RFC7231. This equates to the value of Content-Type HTTP header. If set overrides any value present in the Swagger specification. Overrides all other configuration.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_example_petstore"></a>Example: PetStore</h2></div></div></div><p>Checkout the example in the <code class="literal">camel-example-rest-swagger</code> project in
the <code class="literal">examples</code> directory.</p><p>For example if you wanted to use the
<a class="link" href="http://petstore.swagger.io/" target="_top"><span class="emphasis"><em>PetStore</em></span></a> provided REST API simply
reference the specification URI and desired operation id from the
Swagger specification or download the specification and store it as
<code class="literal">swagger.json</code> (in the root) of CLASSPATH that way it will be
automaticaly used. Let&#8217;s use the <a class="link" href="undertow-component.html" title="Undertow Component">Undertow</a>
component to perform all the requests and Camels excelent support for
Spring Boot.</p><p>Here are our dependencies defined in Maven POM file:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-undertow-starter<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-rest-swagger-starter<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><p>Start by defining the <span class="emphasis"><em>Undertow</em></span> component and the
<span class="emphasis"><em>RestSwaggerComponent</em></span>:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Bean</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> Component petstore(CamelContext camelContext, UndertowComponent undertow) {
    RestSwaggerComponent petstore = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> RestSwaggerComponent(camelContext);
    petstore.setSpecificationUri(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http://petstore.swagger.io/v2/swagger.json"</em></strong>);
    petstore.setDelegate(undertow);

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> petstore;
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Support in Camel for Spring Boot will auto create the
<code class="literal">UndertowComponent</code> Spring bean, and you can configure it using
<code class="literal">application.properties</code> (or <code class="literal">application.yml</code>) using prefix
<code class="literal">camel.component.undertow.</code>. We are defining the <code class="literal">petstore</code>
component here in order to have a named component in the Camel context
that we can use to interact with the PetStore REST API, if this is the
only <code class="literal">rest-swagger</code> component used we might configure it in the same
manner (using <code class="literal">application.properties</code>).</p></td></tr></table></div><p>Now in our application we can simply use the <code class="literal">ProducerTemplate</code> to
invoke PetStore REST methods:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Autowired</span></em>
ProducerTemplate template;

String getPetJsonById(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">int</strong> petId) {
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> template.requestBodyAndHeaders(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"petstore:getPetById"</em></strong>, null, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"petId"</em></strong>, petId);
}</pre></div></div></body></html>
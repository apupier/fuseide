<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>gRPC Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="groovy-language.html" title="Groovy Language"><link rel="next" href="guava-eventbus-component.html" title="Guava EventBus Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="grpc-component"></a>gRPC Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="grpc-component.html#_uri_format_86">URI format</a></span></dt><dt><span class="section"><a href="grpc-component.html#_endpoint_options_4">Endpoint Options</a></span></dt><dt><span class="section"><a href="grpc-component.html#_transport_security_and_authentication_support_available_from_emphasis_role_strong_camel_2_20_emphasis">Transport security and authentication support (available from <span class="strong"><strong>Camel 2.20</strong></span>)</a></span></dt><dt><span class="section"><a href="grpc-component.html#_grpc_producer_resource_type_mapping">gRPC producer resource type mapping</a></span></dt><dt><span class="section"><a href="grpc-component.html#_grpc_consumer_headers_will_be_installed_after_the_consumer_invocation">gRPC consumer headers (will be installed after the consumer invocation)</a></span></dt><dt><span class="section"><a href="grpc-component.html#_examples_15">Examples</a></span></dt><dt><span class="section"><a href="grpc-component.html#_configuration_2">Configuration</a></span></dt><dt><span class="section"><a href="grpc-component.html#_for_more_information_see_these_resources_3">For more information, see these resources</a></span></dt><dt><span class="section"><a href="grpc-component.html#_see_also_51">See Also</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.19</strong></span></p><p>The gRPC component allows you to call or expose Remote Procedure Call (RPC) services
using <a class="link" href="https://developers.google.com/protocol-buffers/docs/overview" target="_top">Protocol Buffers (protobuf)</a>
exchange format over HTTP/2 transport.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-grpc<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_86"></a>URI format</h2></div></div></div><pre class="programlisting">grpc:<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//service[?options]</em></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_endpoint_options_4"></a>Endpoint Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="grpc-component.html#_path_parameters_3_parameters_6">Path Parameters (3 parameters):</a></span></dt><dt><span class="section"><a href="grpc-component.html#_query_parameters_25_parameters_2">Query Parameters (25 parameters):</a></span></dt></dl></div><p>The gRPC component has no options.</p><p>The gRPC endpoint is configured using URI syntax:</p><pre class="screen">grpc:host:port/service</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_3_parameters_6"></a>Path Parameters (3 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>host</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The gRPC server host name. This is localhost or 0.0.0.0 when being a consumer or remote server host name when using producer.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>port</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The gRPC local or remote server port</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>service</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Fully qualified service name from the protocol buffer descriptor file (package dot service definition name)</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_25_parameters_2"></a>Query Parameters (25 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>flowControlWindow</strong></span> (common)</p></td><td align="left" valign="top"><p>The HTTP/2 flow control window size (MiB)</p></td><td align="center" valign="top"><p>1048576</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>maxMessageSize</strong></span> (common)</p></td><td align="left" valign="top"><p>The maximum message size allowed to be received/sent (MiB)</p></td><td align="center" valign="top"><p>4194304</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>bridgeErrorHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions occurred while the consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>consumerStrategy</strong></span> (consumer)</p></td><td align="left" valign="top"><p>This option specifies the top-level strategy for processing service requests and responses in streaming mode. If an aggregation strategy is selected, all requests will be accumulated in the list, then transferred to the flow, and the accumulated responses will be sent to the sender. If a propagation strategy is selected, request is sent to the stream, and the response will be immediately sent back to the sender.</p></td><td align="center" valign="top"><p>PROPAGATION</p></td><td align="left" valign="top"><p>GrpcConsumerStrategy</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>forwardOnCompleted</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Determines if onCompleted events should be pushed to the Camel route.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>forwardOnError</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Determines if onError events should be pushed to the Camel route. Exceptions will be set as message body.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>maxConcurrentCallsPer Connection</strong></span> (consumer)</p></td><td align="left" valign="top"><p>The maximum number of concurrent calls permitted for each incoming server connection</p></td><td align="center" valign="top"><p>2147483647</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exceptionHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExceptionHandler</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exchangePattern</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExchangePattern</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>method</strong></span> (producer)</p></td><td align="left" valign="top"><p>gRPC method name</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>producerStrategy</strong></span> (producer)</p></td><td align="left" valign="top"><p>The mode used to communicate with a remote gRPC server. In SIMPLE mode a single exchange is translated into a remote procedure call. In STREAMING mode all exchanges will be sent within the same request (input and output of the recipient gRPC service must be of type 'stream').</p></td><td align="center" valign="top"><p>SIMPLE</p></td><td align="left" valign="top"><p>GrpcProducerStrategy</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>streamRepliesTo</strong></span> (producer)</p></td><td align="left" valign="top"><p>When using STREAMING client mode, it indicates the endpoint where responses should be forwarded.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>userAgent</strong></span> (producer)</p></td><td align="left" valign="top"><p>The user agent header passed to the server</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>authenticationType</strong></span> (security)</p></td><td align="left" valign="top"><p>Authentication method type in advance to the SSL/TLS negotiation</p></td><td align="center" valign="top"><p>NONE</p></td><td align="left" valign="top"><p>GrpcAuthType</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>jwtAlgorithm</strong></span> (security)</p></td><td align="left" valign="top"><p>JSON Web Token sign algorithm</p></td><td align="center" valign="top"><p>HMAC256</p></td><td align="left" valign="top"><p>JwtAlgorithm</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>jwtIssuer</strong></span> (security)</p></td><td align="left" valign="top"><p>JSON Web Token issuer</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>jwtSecret</strong></span> (security)</p></td><td align="left" valign="top"><p>JSON Web Token secret</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>jwtSubject</strong></span> (security)</p></td><td align="left" valign="top"><p>JSON Web Token subject</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>keyCertChainResource</strong></span> (security)</p></td><td align="left" valign="top"><p>The X.509 certificate chain file resource in PEM format link</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>keyPassword</strong></span> (security)</p></td><td align="left" valign="top"><p>The PKCS8 private key file password</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>keyResource</strong></span> (security)</p></td><td align="left" valign="top"><p>The PKCS8 private key file resource in PEM format link</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>negotiationType</strong></span> (security)</p></td><td align="left" valign="top"><p>Identifies the security negotiation type used for HTTP/2 communication</p></td><td align="center" valign="top"><p>PLAINTEXT</p></td><td align="left" valign="top"><p>NegotiationType</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>serviceAccountResource</strong></span> (security)</p></td><td align="left" valign="top"><p>Service Account key file in JSON format resource link supported by the Google Cloud SDK</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>trustCertCollectionResource</strong></span> (security)</p></td><td align="left" valign="top"><p>The trusted certificates collection file resource in PEM format for verifying the remote endpoint&#8217;s certificate</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_transport_security_and_authentication_support_available_from_emphasis_role_strong_camel_2_20_emphasis"></a>Transport security and authentication support (available from <span class="strong"><strong>Camel 2.20</strong></span>)</h2></div></div></div><p>The following <a class="link" href="https://grpc.io/docs/guides/auth.html" target="_top">authentication</a> mechanisms are built-in to gRPC and available in this component:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>SSL/TLS:</strong></span> gRPC has SSL/TLS integration and promotes the use of SSL/TLS to authenticate the server, and to encrypt all the data exchanged between the client and the server. Optional mechanisms are available for clients to provide certificates for mutual authentication.</li><li class="listitem"><span class="strong"><strong>Token-based authentication with Google:</strong></span> gRPC provides a generic mechanism to attach metadata based credentials to requests and responses. Additional support for acquiring access tokens while accessing Google APIs through gRPC is provided. In general this mechanism must be used as well as SSL/TLS on the channel.</li></ul></div><p>To enable these features the following component properties combinations must be configured:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="19%" class="col_2"><col width="25%" class="col_3"><col width="15%" class="col_4"><col width="31%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Num.</th><th align="left" valign="top">Option</th><th align="left" valign="top">Parameter</th><th align="left" valign="top">Value</th><th align="left" valign="top">Required/Optional</th></tr></thead><tbody><tr><td align="left" valign="top"><p>1</p></td><td align="left" valign="top"><p><span class="strong"><strong>SSL/TLS</strong></span></p></td><td align="left" valign="top"><p>negotiationType</p></td><td align="left" valign="top"><p>TLS</p></td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>keyCertChainResource</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>keyResource</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>keyPassword</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Optional</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>trustCertCollectionResource</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Optional</p></td></tr><tr><td align="left" valign="top"><p>2</p></td><td align="left" valign="top"><p><span class="strong"><strong>Token-based authentication with Google API</strong></span></p></td><td align="left" valign="top"><p>authenticationType</p></td><td align="left" valign="top"><p>GOOGLE</p></td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>negotiationType</p></td><td align="left" valign="top"><p>TLS</p></td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>serviceAccountResource</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top"><p>3</p></td><td align="left" valign="top"><p><span class="strong"><strong>Custom JSON Web Token implementation authentication</strong></span></p></td><td align="left" valign="top"><p>authenticationType</p></td><td align="left" valign="top"><p>JWT</p></td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>negotiationType</p></td><td align="left" valign="top"><p>NONE or TLS</p></td><td align="left" valign="top"><p>Optional. The TLS/SSL not checking for this type, but strongly recommended.</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>jwtAlgorithm</p></td><td align="left" valign="top"><p>HMAC256(default) or (HMAC384,HMAC512)</p></td><td align="left" valign="top"><p>Optional</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>jwtSecret</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>jwtIssuer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Optional</p></td></tr><tr><td align="left" valign="top">&nbsp;</td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>jwtSubject</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p>Optional</p></td></tr></tbody></table></div><p>TLS with OpenSSL is currently the recommended approach for using gRPC over TLS component.
Using the JDK for ALPN is generally much slower and may not support the necessary ciphers for HTTP2. This function is not implemented in the component.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_grpc_producer_resource_type_mapping"></a>gRPC producer resource type mapping</h2></div></div></div><p>The table below shows the types of objects in the message body, depending on the types (simple or stream) of incoming and outgoing parameters, as well as the invocation style (synchronous or asynchronous). Please note, that invocation of the procedures with incoming stream parameter in asynchronous style are not allowed.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="15%" class="col_1"><col width="16%" class="col_2"><col width="15%" class="col_3"><col width="27%" class="col_4"><col width="27%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Invocation style</th><th align="left" valign="top">Request type</th><th align="left" valign="top">Response type</th><th align="left" valign="top">Request Body Type</th><th align="left" valign="top">Result Body Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span></p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>Object</p></td><td align="left" valign="top"><p>Object</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span></p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>Object</p></td><td align="left" valign="top"><p>List&lt;Object&gt;</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>not allowed</p></td><td align="left" valign="top"><p>not allowed</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>not allowed</p></td><td align="left" valign="top"><p>not allowed</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>asynchronous</strong></span></p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>Object</p></td><td align="left" valign="top"><p>List&lt;Object&gt;</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>asynchronous</strong></span></p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>Object</p></td><td align="left" valign="top"><p>List&lt;Object&gt;</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>asynchronous</strong></span></p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>simple</p></td><td align="left" valign="top"><p>Object or List&lt;Object&gt;</p></td><td align="left" valign="top"><p>List&lt;Object&gt;</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>asynchronous</strong></span></p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>stream</p></td><td align="left" valign="top"><p>Object or List&lt;Object&gt;</p></td><td align="left" valign="top"><p>List&lt;Object&gt;</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_grpc_consumer_headers_will_be_installed_after_the_consumer_invocation"></a>gRPC consumer headers (will be installed after the consumer invocation)</h2></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="24%" class="col_1"><col width="51%" class="col_2"><col width="25%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Header name</th><th align="left" valign="top">Description</th><th align="left" valign="top">Possible values</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>CamelGrpcMethodName</strong></span></p></td><td align="left" valign="top"><p>Method name handled by the consumer service</p></td><td align="left" valign="top">&nbsp;</td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>CamelGrpcEventType</strong></span></p></td><td align="left" valign="top"><p>Received event type from the sent request</p></td><td align="left" valign="top"><p>onNext, onCompleted or onError</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>CamelGrpcUserAgent</strong></span></p></td><td align="left" valign="top"><p>If provided, the given agent will prepend the gRPC library&#8217;s user agent information</p></td><td align="left" valign="top">&nbsp;</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_examples_15"></a>Examples</h2></div></div></div><p>Below is a simple synchronous method invoke with host and port parameters</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:grpc-sync"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"grpc://remotehost:1101/org.apache.camel.component.grpc.PingPong?method=sendPing&amp;synchronous=true"</em></strong>);</pre><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:grpc-sync"</em></strong> /&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"grpc://remotehost:1101/org.apache.camel.component.grpc.PingPong?method=sendPing&amp;synchronous=true"</em></strong>/&gt;
&lt;/route&gt;</pre><p>An asynchronous method invoke</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:grpc-async"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"grpc://remotehost:1101/org.apache.camel.component.grpc.PingPong?method=pingAsyncResponse"</em></strong>);</pre><p>gRPC service consumer with propagation consumer strategy</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"grpc://localhost:1101/org.apache.camel.component.grpc.PingPong?consumerStrategy=PROPAGATION"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:grpc-service"</em></strong>);</pre><p>gRPC service producer with streaming producer strategy (requires a service that uses "stream" mode as input and output)</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:grpc-request-stream"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"grpc://remotehost:1101/org.apache.camel.component.grpc.PingPong?method=PingAsyncAsync&amp;producerStrategy=STREAMING&amp;streamRepliesTo=direct:grpc-response-stream"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:grpc-response-stream"</em></strong>)
.log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Response received: ${body}"</em></strong>);</pre><p>gRPC service consumer TLS/SLL security negotiation enable</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"grpc://localhost:1101/org.apache.camel.component.grpc.PingPong?consumerStrategy=PROPAGATION&amp;negotiationType=TLS&amp;keyCertChainResource=file:src/test/resources/certs/server.pem&amp;keyResource=file:src/test/resources/certs/server.key&amp;trustCertCollectionResource=file:src/test/resources/certs/ca.pem"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:tls-enable"</em></strong>)</pre><p>gRPC service producer with custom JSON Web Token implementation authentication</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:grpc-jwt"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"grpc://localhost:1101/org.apache.camel.component.grpc.PingPong?method=pingSyncSync&amp;synchronous=true&amp;authenticationType=JWT&amp;jwtSecret=supersecuredsecret"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_configuration_2"></a>Configuration</h2></div></div></div><p>It&#8217;s it is recommended to use Maven Protocol Buffers Plugin which calls Protocol Buffer Compiler (protoc) tool to generate Java source files from .proto (protocol buffer definition) files for the custom project. This plugin will generate procedures request and response classes, their builders and gRPC procedures stubs classes as well.</p><p>Following steps are required:</p><p>Insert operating system and CPU architecture detection extension inside <span class="strong"><strong>&lt;build&gt;</strong></span> tag of the project pom.xml or set ${os.detected.classifier} parameter manually</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;extensions&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;extension&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>kr.motd.maven<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>os-maven-plugin<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>1.4.1.Final<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/extension&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/extensions&gt;</strong></pre><p>Insert gRPC and protobuf Java code generator plugin <span class="strong"><strong>&lt;plugins&gt;</strong></span> tag of the project pom.xml</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;plugin&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.xolstice.maven.plugins<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>protobuf-maven-plugin<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>0.5.0<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;configuration&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;protocArtifact&gt;</strong>com.google.protobuf:protoc:${protobuf-version}:exe:${os.detected.classifier}<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/protocArtifact&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;pluginId&gt;</strong>grpc-java<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/pluginId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;pluginArtifact&gt;</strong>io.grpc:protoc-gen-grpc-java:${grpc-version}:exe:${os.detected.classifier}<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/pluginArtifact&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/configuration&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;executions&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;execution&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;goals&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;goal&gt;</strong>compile<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/goal&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;goal&gt;</strong>compile-custom<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/goal&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;goal&gt;</strong>test-compile<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/goal&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;goal&gt;</strong>test-compile-custom<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/goal&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/goals&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/execution&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/executions&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/plugin&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_for_more_information_see_these_resources_3"></a>For more information, see these resources</h2></div></div></div><p><a class="link" href="http://www.grpc.io/" target="_top">gRPC project site</a></p><p><a class="link" href="https://www.xolstice.org/protobuf-maven-plugin" target="_top">Maven Protocol Buffers Plugin</a></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_see_also_51"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Getting Started</li><li class="listitem">Configuring Camel</li><li class="listitem">Component</li><li class="listitem">Endpoint</li><li class="listitem"><a class="link" href="protobuf-dataformat.html" title="Protobuf DataFormat">Protocol Buffers Data Format</a></li></ul></div></div></div></body></html>
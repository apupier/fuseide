<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>CSV DataFormat</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="crypto-dataformat.html" title="Crypto (Java Cryptographic Extension) DataFormat"><link rel="next" href="cxf-component.html" title="CXF"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="csv-dataformat"></a>CSV DataFormat</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="csv-dataformat.html#_options_28">Options</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_marshalling_a_map_to_csv">Marshalling a Map to CSV</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_unmarshalling_a_csv_message_into_a_java_list">Unmarshalling a CSV message into a Java List</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_marshalling_a_list_map_to_csv">Marshalling a List&lt;Map&gt; to CSV</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_file_poller_of_csv_then_unmarshaling">File Poller of CSV, then unmarshaling</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_marshaling_with_a_pipe_as_delimiter">Marshaling with a pipe as delimiter</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_using_skipfirstline_option_while_unmarshaling">Using skipFirstLine option while unmarshaling</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_unmarshaling_with_a_pipe_as_delimiter">Unmarshaling with a pipe as delimiter</a></span></dt><dt><span class="section"><a href="csv-dataformat.html#_dependencies_27">Dependencies</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 1.3</strong></span></p><p>The CSV Data Format uses
<a class="link" href="http://commons.apache.org/proper/commons-csv/" target="_top">Apache Commons CSV</a> to
handle CSV payloads (Comma Separated Values) such as those
exported/imported by Excel.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_28"></a>Options</h2></div></div></div><p>The CSV dataformat supports 28 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>formatRef</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The reference format to use, it will be updated with the other format options, the default value is CSVFormat.DEFAULT</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>formatName</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The name of the format to use, the default value is CSVFormat.DEFAULT</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>commentMarkerDisabled</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Disables the comment marker of the reference format.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>commentMarker</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the comment marker of the reference format.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>delimiter</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the delimiter to use. The default value is , (comma)</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>escapeDisabled</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Use for disabling using escape character</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>escape</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the escape character to use</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>headerDisabled</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Use for disabling headers</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>header</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">List</code></p></td><td align="left" valign="top"><p>To configure the CSV headers</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>allowMissingColumnNames</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to allow missing column names.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreEmptyLines</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to ignore empty lines.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreSurroundingSpaces</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to ignore surrounding spaces</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>nullStringDisabled</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Used to disable null strings</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>nullString</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the null string</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>quoteDisabled</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Used to disable quotes</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>quote</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the quote which by default is</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>recordSeparatorDisabled</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Used for disabling record separator</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>recordSeparator</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the record separator (aka new line) which by default is new line characters (CRLF)</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>skipHeaderRecord</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to skip the header record in the output</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>quoteMode</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Sets the quote mode</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreHeaderCase</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Sets whether or not to ignore case when accessing header names.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>trim</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Sets whether or not to trim leading and trailing blanks.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>trailingDelimiter</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Sets whether or not to add a trailing delimiter.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>lazyLoad</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>useMaps</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the unmarshalling should produce maps (HashMap)for the lines values instead of lists. It requires to have header (either defined or collected).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>useOrderedMaps</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the unmarshalling should produce ordered maps (LinkedHashMap) for the lines values instead of lists. It requires to have header (either defined or collected).</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>recordConverterRef</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Refers to a custom CsvRecordConverter to lookup from the registry to use.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_marshalling_a_map_to_csv"></a>Marshalling a Map to CSV</h2></div></div></div><p>The component allows you to marshal a Java Map (or any other message
type that can be converted in a Map) into a
CSV payload.</p><p>Considering the following body</p><pre class="programlisting">Map&lt;String, Object&gt; body = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> LinkedHashMap&lt;&gt;();
body.put(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"foo"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"abc"</em></strong>);
body.put(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bar"</em></strong>, <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">123</span>);</pre><p>and this Java route definition</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .marshal().csv()
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre><p>or this XML route definition</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;marshal&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;csv /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/marshal&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:result"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>then it will produce</p><pre class="screen">abc,123</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_unmarshalling_a_csv_message_into_a_java_list"></a>Unmarshalling a CSV message into a Java List</h2></div></div></div><p>Unmarshalling will transform a CSV messsage into a Java List with CSV
file lines (containing another List with all the field values).</p><p>An example: we have a CSV file with names of persons, their IQ and their
current activity.</p><pre class="programlisting">Jack Dalton, 115, mad at Averell
Joe Dalton, 105, calming Joe
William Dalton, 105, keeping Joe from killing Averell
Averell Dalton, 80, playing with Rantanplan
Lucky Luke, 120, capturing the Daltons</pre><p>We can now use the CSV component to unmarshal this file:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:src/test/resources/?fileName=daltons.csv&amp;noop=true"</em></strong>)
    .unmarshal().csv()
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:daltons"</em></strong>);</pre><p>The resulting message will contain a <code class="literal">List&lt;List&lt;String&gt;&gt;</code> like&#8230;&#8203;</p><pre class="programlisting">List&lt;List&lt;String&gt;&gt; data = (List&lt;List&lt;String&gt;&gt;) exchange.getIn().getBody();
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">for</strong> (List&lt;String&gt; line : data) {
    LOG.debug(String.format(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"%s has an IQ of %s and is currently %s"</em></strong>, line.get(<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">0</span>), line.get(<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>), line.get(<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2</span>)));
}</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_marshalling_a_list_map_to_csv"></a>Marshalling a List&lt;Map&gt; to CSV</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.1</strong></span></p><p>If you have multiple rows of data you want to be marshalled into CSV
format you can now store the message payload as a
<code class="literal">List&lt;Map&lt;String, Object&gt;&gt;</code> object where the list contains a Map for
each row.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_file_poller_of_csv_then_unmarshaling"></a>File Poller of CSV, then unmarshaling</h2></div></div></div><p>Given a bean which can handle the incoming data&#8230;&#8203;</p><p><span class="strong"><strong>MyCsvHandler.java</strong></span></p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Some comments here</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> doHandleCsvData(List&lt;List&lt;String&gt;&gt; csvData)
{
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// do magic here</em>
}</pre><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">your route then looks as follows</li></ol></div><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- poll every 10 seconds --&gt;</em>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file:///some/path/to/pickup/csvfiles?delete=true&amp;amp;consumer.delay=10000"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;unmarshal&gt;</strong><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;csv /&gt;</strong><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/unmarshal&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:myCsvHandler?method=doHandleCsvData"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_marshaling_with_a_pipe_as_delimiter"></a>Marshaling with a pipe as delimiter</h2></div></div></div><p>Considering the following body</p><pre class="programlisting">Map&lt;String, Object&gt; body = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> LinkedHashMap&lt;&gt;();
body.put(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"foo"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"abc"</em></strong>);
body.put(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bar"</em></strong>, <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">123</span>);</pre><p>and this Java route definition</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Camel version &lt; 2.15</em>
CsvDataFormat oldCSV = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CsvDataFormat();
oldCSV.setDelimiter(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"|"</em></strong>);
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .marshal(oldCSV)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>)

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Camel version &gt;= 2.15</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .marshal(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CsvDataFormat().setDelimiter(&amp;#<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">39</span>;|&amp;#<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">39</span>;))
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>)</pre><p>or this XML route definition</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;marshal&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;csv</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">delimiter</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"|"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/marshal&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:result"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>then it will produce</p><pre class="screen">abc|123</pre><p><a name="CSV-UsingautogenColumns"></a>Using autogenColumns, configRef and strategyRef attributes inside XML
<span class="marked">#</span> DSL</p><p><span class="strong"><strong>Available as of Camel 2.9.2 / 2.10 and deleted for Camel 2.15</strong></span></p><p>You can customize the CSV Data Format to make use
of your own <code class="literal">CSVConfig</code> and/or <code class="literal">CSVStrategy</code>. Also note that the default
value of the <code class="literal">autogenColumns</code> option is true. The following example
should illustrate this customization.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;marshal&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- make use of a strategy other than the default one which is 'org.apache.commons.csv.CSVStrategy.DEFAULT_STRATEGY' --&gt;</em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;csv</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">autogenColumns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"false"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">delimiter</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"|"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">configRef</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"csvConfig"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">strategyRef</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"excelStrategy"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/marshal&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;convertBodyTo</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">type</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"java.lang.String"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mock:result"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"csvConfig"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.commons.csv.writer.CSVConfig"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"fields"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;list&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.commons.csv.writer.CSVField"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"name"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"orderId"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.commons.csv.writer.CSVField"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"name"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"amount"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/list&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/property&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"excelStrategy"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.springframework.beans.factory.config.FieldRetrievingFactoryBean"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"staticField"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.commons.csv.CSVStrategy.EXCEL_STRATEGY"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_skipfirstline_option_while_unmarshaling"></a>Using skipFirstLine option while unmarshaling</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.10 and deleted for Camel 2.15</strong></span></p><p>You can instruct the CSV Data Format to skip the
first line which contains the CSV headers. Using the Spring/XML DSL:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;unmarshal&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;csv</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">skipFirstLine</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/unmarshal&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:myCsvHandler?method=doHandleCsv"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>Or the Java DSL:</p><pre class="programlisting">CsvDataFormat csv = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CsvDataFormat();
csv.setSkipFirstLine(true);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .unmarshal(csv)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:myCsvHandler?method=doHandleCsv"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_unmarshaling_with_a_pipe_as_delimiter"></a>Unmarshaling with a pipe as delimiter</h2></div></div></div><p>Using the Spring/XML DSL:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;unmarshal&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;csv</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">delimiter</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"|"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/unmarshal&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:myCsvHandler?method=doHandleCsv"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>Or the Java DSL:</p><pre class="programlisting">CsvDataFormat csv = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CsvDataFormat();
CSVStrategy strategy = CSVStrategy.DEFAULT_STRATEGY;
strategy.setDelimiter(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">'|'</em></strong>);
csv.setStrategy(strategy);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .unmarshal(csv)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:myCsvHandler?method=doHandleCsv"</em></strong>);</pre><pre class="programlisting">CsvDataFormat csv = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CsvDataFormat();
csv.setDelimiter(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"|"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .unmarshal(csv)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:myCsvHandler?method=doHandleCsv"</em></strong>);</pre><pre class="programlisting">CsvDataFormat csv = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CsvDataFormat();
CSVConfig csvConfig = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CSVConfig();
csvConfig.setDelimiter(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">";"</em></strong>);
csv.setConfig(csvConfig);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
  .unmarshal(csv)
  .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:myCsvHandler?method=doHandleCsv"</em></strong>);</pre><p><span class="strong"><strong>Issue in CSVConfig</strong></span></p><p>It looks like that</p><pre class="programlisting">CSVConfig csvConfig = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CSVConfig();
csvConfig.setDelimiter(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">';'</em></strong>);</pre><p>doesn&#8217;t work. You have to set the delimiter as a String!</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_27"></a>Dependencies</h2></div></div></div><p>To use CSV in your Camel routes you need to add a dependency on
<span class="strong"><strong>camel-csv</strong></span>, which implements this data format.</p><p>If you use Maven you can just add the following to your pom.xml,
substituting the version number for the latest and greatest release (see
the download page for the latest versions).</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-csv<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre></div></div></body></html>
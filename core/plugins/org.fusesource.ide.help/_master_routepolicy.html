<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Master RoutePolicy</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="zookeeper-master-component.html" title="ZooKeeper Master Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="_master_routepolicy"></a>Master RoutePolicy</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="_master_routepolicy.html#_see_also_151">See Also</a></span></dt></dl></div><p>You can also use a <code class="literal">RoutePolicy</code> to control routes in master/slave mode.</p><p>When doing so you must configure the route policy with</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">url to zookeeper ensemble</li><li class="listitem">name of cluster group</li><li class="listitem"><span class="strong"><strong>important</strong></span> and set the route to not auto startup</li></ul></div><p>A little example</p><pre class="programlisting">    MasterRoutePolicy master = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> MasterRoutePolicy();
    master.setZooKeeperUrl(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"localhost:2181"</em></strong>);
    master.setGroupName(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myGroup"</em></strong>);

    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// its import to set the route to not auto startup</em>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// as we let the route policy start/stop the routes when it becomes a master/slave etc</em>
    from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/inbox?delete=true"</em></strong>).noAutoStartup()
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// use the zookeeper master route policy in the clustered group</em>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// to run this route in master/slave mode</em>
        .routePolicy(master)
        .log(name + <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">" - Received file: ${file:name}"</em></strong>)
        .delay(delay)
        .log(name + <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">" - Done file:     ${file:name}"</em></strong>)
        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:target/outbox"</em></strong>);</pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_see_also_151"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Configuring Camel</li><li class="listitem">Component</li><li class="listitem">Endpoint</li><li class="listitem">Getting Started</li></ul></div></div></div></body></html>
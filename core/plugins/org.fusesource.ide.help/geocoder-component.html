<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Geocoder Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="ganglia-component.html" title="Ganglia Component"><link rel="next" href="git-component.html" title="Git Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="geocoder-component"></a>Geocoder Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="geocoder-component.html#_uri_format_79">URI format</a></span></dt><dt><span class="section"><a href="geocoder-component.html#_options_45">Options</a></span></dt><dt><span class="section"><a href="geocoder-component.html#_exchange_data_format_3">Exchange data format</a></span></dt><dt><span class="section"><a href="geocoder-component.html#_message_headers_11">Message Headers</a></span></dt><dt><span class="section"><a href="geocoder-component.html#_samples_19">Samples</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.12</strong></span></p><p>The <span class="strong"><strong>geocoder:</strong></span> component is used for looking up geocodes (latitude and
longitude) for a given address, or reverse lookup. The component uses
the <a class="link" href="https://code.google.com/p/geocoder-java/" target="_top">Java API for Google
Geocoder</a> library.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-geocoder<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_79"></a>URI format</h2></div></div></div><pre class="programlisting">geocoder:address:name[?options]
geocoder:latlng:latitude,longitude[?options]</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_45"></a>Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="geocoder-component.html#_path_parameters_2_parameters_17">Path Parameters (2 parameters):</a></span></dt><dt><span class="section"><a href="geocoder-component.html#_query_parameters_14_parameters_2">Query Parameters (14 parameters):</a></span></dt></dl></div><p>The Geocoder component has no options.</p><p>The Geocoder endpoint is configured using URI syntax:</p><pre class="screen">geocoder:address:latlng</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_2_parameters_17"></a>Path Parameters (2 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>address</strong></span></p></td><td align="left" valign="top"><p>The geo address which should be prefixed with address:</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>latlng</strong></span></p></td><td align="left" valign="top"><p>The geo latitude and longitude which should be prefixed with latlng:</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_14_parameters_2"></a>Query Parameters (14 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>clientId</strong></span> (producer)</p></td><td align="left" valign="top"><p>To use google premium with this client id</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>clientKey</strong></span> (producer)</p></td><td align="left" valign="top"><p>To use google premium with this client key</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>headersOnly</strong></span> (producer)</p></td><td align="left" valign="top"><p>Whether to only enrich the Exchange with headers, and leave the body as-is.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>language</strong></span> (producer)</p></td><td align="left" valign="top"><p>The language to use.</p></td><td align="center" valign="top"><p>en</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>httpClientConfigurer</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Register a custom configuration strategy for new HttpClient instances created by producers or consumers such as to configure authentication mechanisms etc</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>HttpClientConfigurer</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>httpConnectionManager</strong></span> (advanced)</p></td><td align="left" valign="top"><p>To use a custom HttpConnectionManager to manage connections</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>HttpConnectionManager</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>proxyAuthDomain</strong></span> (proxy)</p></td><td align="left" valign="top"><p>Domain for proxy NTML authentication</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>proxyAuthHost</strong></span> (proxy)</p></td><td align="left" valign="top"><p>Optional host for proxy NTML authentication</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>proxyAuthMethod</strong></span> (proxy)</p></td><td align="left" valign="top"><p>Authentication method for proxy, either as Basic, Digest or NTLM.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>proxyAuthPassword</strong></span> (proxy)</p></td><td align="left" valign="top"><p>Password for proxy authentication</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>proxyAuthUsername</strong></span> (proxy)</p></td><td align="left" valign="top"><p>Username for proxy authentication</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>proxyHost</strong></span> (proxy)</p></td><td align="left" valign="top"><p>The proxy host name</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>proxyPort</strong></span> (proxy)</p></td><td align="left" valign="top"><p>The proxy port number</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>Integer</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_exchange_data_format_3"></a>Exchange data format</h2></div></div></div><p>Camel will deliver the body as a
<code class="literal">com.google.code.geocoder.model.GeocodeResponse</code> type.
 And if the address is <code class="literal">"current"</code> then the response is a String type
with a JSON representation of the current location.</p><p>If the option <code class="literal">headersOnly</code> is set to <code class="literal">true</code> then the message body is
left as-is, and only headers will be added to the
Exchange.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_message_headers_11"></a>Message Headers</h2></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="50%" class="col_1"><col width="50%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Header</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderStatus</code></p></td><td align="left" valign="top"><p>Mandatory. Status code from the geocoder library. If status is
<code class="literal">GeocoderStatus.OK</code> then additional headers is enriched</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderAddress</code></p></td><td align="left" valign="top"><p>The formatted address</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderLat</code></p></td><td align="left" valign="top"><p>The latitude of the location.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderLng</code></p></td><td align="left" valign="top"><p>The longitude of the location.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderLatlng</code></p></td><td align="left" valign="top"><p>The latitude and longitude of the location. Separated by comma.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderCity</code></p></td><td align="left" valign="top"><p>The city long name.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderRegionCode</code></p></td><td align="left" valign="top"><p>The region code.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderRegionName</code></p></td><td align="left" valign="top"><p>The region name.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderCountryLong</code></p></td><td align="left" valign="top"><p>The country long name.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelGeoCoderCountryShort</code></p></td><td align="left" valign="top"><p>The country short name.</p></td></tr></tbody></table></div><p>Notice not all headers may be provided depending on available data and
mode in use (address vs latlng).</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_samples_19"></a>Samples</h2></div></div></div><p>In the example below we get the latitude and longitude for Paris, France</p><pre class="programlisting">  from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"geocoder:address:Paris, France"</em></strong>)</pre><p>If you provide a header with the <code class="literal">CamelGeoCoderAddress</code> then that
overrides the endpoint configuration, so to get the location of
Copenhagen, Denmark we can send a message with a headers as shown:</p><pre class="programlisting">template.sendBodyAndHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello"</em></strong>, GeoCoderConstants.ADDRESS, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Copenhagen, Denmark"</em></strong>);</pre><p>To get the address for a latitude and longitude we can do:</p><pre class="programlisting">  from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"geocoder:latlng:40.714224,-73.961452"</em></strong>)
    .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Location ${header.CamelGeocoderAddress} is at lat/lng: ${header.CamelGeocoderLatlng} and in country ${header.CamelGeoCoderCountryShort}"</em></strong>)</pre><p>Which will log</p><pre class="programlisting">Location <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">285</span> Bedford Avenue, Brooklyn, NY <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">11211</span>, USA is at lat/lng: <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">40.71412890</span>,-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">73.96140740</span> and in country US</pre><p>To get the current location you can use "current" as the address as
shown:</p><pre class="programlisting">  from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"geocoder:address:current"</em></strong>)</pre></div></div></body></html>
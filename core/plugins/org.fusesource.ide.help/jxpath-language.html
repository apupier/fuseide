<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>JXPath Language (deprecated)</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="jt400-component.html" title="JT400 Component"><link rel="next" href="kafka-component.html" title="Kafka Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="jxpath-language"></a>JXPath Language (deprecated)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="jxpath-language.html#_jxpath_options">JXPath Options</a></span></dt><dt><span class="section"><a href="jxpath-language.html#_variables_2">Variables</a></span></dt><dt><span class="section"><a href="jxpath-language.html#_options_86">Options</a></span></dt><dt><span class="section"><a href="jxpath-language.html#_using_xml_configuration_2">Using XML configuration</a></span></dt><dt><span class="section"><a href="jxpath-language.html#_examples_18">Examples</a></span></dt><dt><span class="section"><a href="jxpath-language.html#_jxpath_injection">JXPath injection</a></span></dt><dt><span class="section"><a href="jxpath-language.html#_loading_script_from_external_resource_2">Loading script from external resource</a></span></dt><dt><span class="section"><a href="jxpath-language.html#_dependencies_46">Dependencies</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 1.3</strong></span></p><p>Camel supports <a class="link" href="http://commons.apache.org/jxpath/" target="_top">JXPath</a> to allow
<a class="link" href="xpath-language.html" title="XPath Language">XPath</a> expressions to be used on beans in an
Expression or Predicate to be
used in the DSL or <a class="link" href="xml-configuration.html" target="_top">Xml
Configuration</a>. For example you could use JXPath to create an
Predicate in a <a class="link" href="message-filter.html" target="_top">Message
Filter</a> or as an Expression for a
Recipient List.</p><p>You can use XPath expressions directly using smart completion in your
IDE as follows</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"queue:foo"</em></strong>).filter().
  jxpath(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"/in/body/foo"</em></strong>).
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"queue:bar"</em></strong>)</pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_jxpath_options"></a>JXPath Options</h2></div></div></div><p>The JXPath language supports 2 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>lenient</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Allows to turn lenient on the JXPathContext. When turned on this allows the JXPath expression to evaluate against expressions and message bodies which may be invalid / missing data. This option is by default false</p></td></tr><tr><td align="left" valign="top"><p>trim</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to trim the value to remove leading and trailing whitespaces and line breaks</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_variables_2"></a>Variables</h2></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Variable</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>this</strong></span></p></td><td align="left" valign="top"><p>Exchange</p></td><td align="left" valign="top"><p>the Exchange object</p></td></tr><tr><td align="left" valign="top"><p>in</p></td><td align="left" valign="top"><p>Message</p></td><td align="left" valign="top"><p>the exchange.in message</p></td></tr><tr><td align="left" valign="top"><p>out</p></td><td align="left" valign="top"><p>Message</p></td><td align="left" valign="top"><p>the exchange.out message</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_86"></a>Options</h2></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Option</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>lenient</p></td><td align="left" valign="top"><p>boolean</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.11/2.10.5:</strong></span> Allows to turn lenient on the JXPathContext. When
turned on this allows the JXPath expression to evaluate against
expressions and message bodies which may be invalid / missing data. See
more details at the
<a class="link" href="http://commons.apache.org/proper/commons-jxpath//users-guide.html#Lenient_Mode" target="_top">JXPath
Documentation</a> This option is by default false.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_xml_configuration_2"></a>Using XML configuration</h2></div></div></div><p>If you prefer to configure your routes in your Spring
XML file then you can use JXPath expressions as follows</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;beans</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.springframework.org/schema/beans"</span>
       <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:xsi</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xsi:schemaLocation</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>

  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"camel"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://activemq.apache.org/camel/schema/spring"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"activemq:MyQueue"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;filter&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;jxpath&gt;</strong>in/body/name = 'James'<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/xpath&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"mqseries:SomeOtherQueue"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/filter&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/beans&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_examples_18"></a>Examples</h2></div></div></div><p>Here is a simple
<a class="link" href="http://svn.apache.org/repos/asf/camel/trunk/components/camel-jxpath/src/test/java/org/apache/camel/language/jxpath/JXPathFilterTest.java" target="_top">example</a>
using a JXPath expression as a predicate in a
Message Filter</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_jxpath_injection"></a>JXPath injection</h2></div></div></div><p>You can use Bean Integration to invoke a
method on a bean and use various languages such as JXPath to extract a
value from the message and bind it to a method parameter.</p><p>For example</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> Foo {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@MessageDriven(uri = "activemq:my.queue")</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> doSomething(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@JXPath("in/body/foo")</span></em> String correlationID, <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Body</span></em> String body) {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// process the inbound message here</em>
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_loading_script_from_external_resource_2"></a>Loading script from external resource</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.11</strong></span></p><p>You can externalize the script and have Camel load it from a resource
such as <code class="literal">"classpath:"</code>, <code class="literal">"file:"</code>, or <code class="literal">"http:"</code>.
 This is done using the following syntax: <code class="literal">"resource:scheme:location"</code>,
eg to refer to a file on the classpath you can do:</p><pre class="programlisting">.setHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myHeader"</em></strong>).jxpath(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"resource:classpath:myjxpath.txt"</em></strong>)</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_46"></a>Dependencies</h2></div></div></div><p>To use JXpath in your camel routes you need to add the a dependency on
<span class="strong"><strong>camel-jxpath</strong></span> which implements the JXpath language.</p><p>If you use maven you could just add the following to your pom.xml,
substituting the version number for the latest &amp; greatest release (see
the download page for the latest versions).</p><pre class="programlisting">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-jxpath&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</pre><p>Otherwise, you&#8217;ll also need
<a class="link" href="http://repo2.maven.org/maven2/commons-jxpath/commons-jxpath/1.3/commons-jxpath-1.3.jar" target="_top">Commons
JXPath</a>.</p></div></div></body></html>
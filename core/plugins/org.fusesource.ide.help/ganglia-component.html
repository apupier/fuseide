<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Ganglia Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="ftps-component.html" title="FTPS Component"><link rel="next" href="geocoder-component.html" title="Geocoder Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="ganglia-component"></a>Ganglia Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ganglia-component.html#_uri_format_78">URI format</a></span></dt><dt><span class="section"><a href="ganglia-component.html#_ganglia_component_and_endpoint_uri_options">Ganglia component and endpoint URI options</a></span></dt><dt><span class="section"><a href="ganglia-component.html#_message_body_9">Message body</a></span></dt><dt><span class="section"><a href="ganglia-component.html#_return_value_response">Return value / response</a></span></dt><dt><span class="section"><a href="ganglia-component.html#_examples_14">Examples</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.15</strong></span></p><p>Provides a mechanism to send a value (the message body) as a metric to
the <a class="link" href="http://ganglia.info" target="_top">Ganglia</a> monitoring system.&nbsp; Uses the gmetric4j
library.&nbsp; Can be used in conjunction with standard
<a class="link" href="http://ganglia.info" target="_top">Ganglia</a> and
<a class="link" href="https://github.com/ganglia/jmxetric" target="_top">JMXetric</a> for monitoring metrics
from the OS, JVM and business processes through a single platform.</p><p>You should have a Ganglia gmond agent running on the machine where your
JVM runs.&nbsp; The gmond sends a heartbeat to the Ganglia infrastructure,
camel-ganglia can&#8217;t send the heartbeat itself currently.</p><p>On most Linux systems (Debian, Ubuntu, Fedora and RHEL/CentOS with EPEL)
you can just install the Ganglia agent package and it runs automatically
using multicast configuration.&nbsp; You can configure it to use regular UDP
unicast if you prefer.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><p>&nbsp;</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-ganglia<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_78"></a>URI format</h2></div></div></div><pre class="programlisting">ganglia:address:port[?options]</pre><p>You can append query options to the URI in the following format,
<code class="literal">?option=value&amp;option=value&amp;&#8230;&#8203;</code></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_ganglia_component_and_endpoint_uri_options"></a>Ganglia component and endpoint URI options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ganglia-component.html#_path_parameters_2_parameters_16">Path Parameters (2 parameters):</a></span></dt><dt><span class="section"><a href="ganglia-component.html#_query_parameters_13_parameters_4">Query Parameters (13 parameters):</a></span></dt></dl></div><p>The Ganglia component supports 2 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>configuration</strong></span> (advanced)</p></td><td align="left" valign="top"><p>To use the shared configuration</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>GangliaConfiguration</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>resolveProperty Placeholders</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Whether the component should resolve property placeholders on itself when starting. Only properties which are of String type can use property placeholders.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div><p>The Ganglia endpoint is configured using URI syntax:</p><pre class="screen">ganglia:host:port</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_2_parameters_16"></a>Path Parameters (2 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>host</strong></span></p></td><td align="left" valign="top"><p>Host name for Ganglia server</p></td><td align="center" valign="top"><p>239.2.11.71</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>port</strong></span></p></td><td align="left" valign="top"><p>Port for Ganglia server</p></td><td align="center" valign="top"><p>8649</p></td><td align="left" valign="top"><p>int</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_13_parameters_4"></a>Query Parameters (13 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>dmax</strong></span> (producer)</p></td><td align="left" valign="top"><p>Minumum time in seconds before Ganglia will purge the metric value if it expires. Set to 0 and the value will remain in Ganglia indefinitely until a gmond agent restart.</p></td><td align="center" valign="top"><p>0</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>groupName</strong></span> (producer)</p></td><td align="left" valign="top"><p>The group that the metric belongs to.</p></td><td align="center" valign="top"><p>java</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>metricName</strong></span> (producer)</p></td><td align="left" valign="top"><p>The name to use for the metric.</p></td><td align="center" valign="top"><p>metric</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>mode</strong></span> (producer)</p></td><td align="left" valign="top"><p>Send the UDP metric packets using MULTICAST or UNICAST</p></td><td align="center" valign="top"><p>MULTICAST</p></td><td align="left" valign="top"><p>UDPAddressingMode</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>prefix</strong></span> (producer)</p></td><td align="left" valign="top"><p>Prefix the metric name with this string and an underscore.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>slope</strong></span> (producer)</p></td><td align="left" valign="top"><p>The slope</p></td><td align="center" valign="top"><p>BOTH</p></td><td align="left" valign="top"><p>GMetricSlope</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>spoofHostname</strong></span> (producer)</p></td><td align="left" valign="top"><p>Spoofing information IP:hostname</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>tmax</strong></span> (producer)</p></td><td align="left" valign="top"><p>Maximum time in seconds that the value can be considered current. After this, Ganglia considers the value to have expired.</p></td><td align="center" valign="top"><p>60</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ttl</strong></span> (producer)</p></td><td align="left" valign="top"><p>If using multicast, set the TTL of the packets</p></td><td align="center" valign="top"><p>5</p></td><td align="left" valign="top"><p>int</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>type</strong></span> (producer)</p></td><td align="left" valign="top"><p>The type of value</p></td><td align="center" valign="top"><p>STRING</p></td><td align="left" valign="top"><p>GMetricType</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>units</strong></span> (producer)</p></td><td align="left" valign="top"><p>Any unit of measurement that qualifies the metric, e.g. widgets, litres, bytes. Do not include a prefix such as k (kilo) or m (milli), other tools may scale the units later. The value should be unscaled.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>wireFormat31x</strong></span> (producer)</p></td><td align="left" valign="top"><p>Use the wire format of Ganglia 3.1.0 and later versions. Set this to false to use Ganglia 3.0.x or earlier.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_message_body_9"></a>Message body</h2></div></div></div><p>Any value (such as a string or numeric type) in the body is sent to the
Ganglia system.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_return_value_response"></a>Return value / response</h2></div></div></div><p>Ganglia sends metrics using unidirectional UDP or multicast.&nbsp; There is
no response or change to the message body.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_examples_14"></a>Examples</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ganglia-component.html#_sending_a_string_metric">Sending a String metric</a></span></dt><dt><span class="section"><a href="ganglia-component.html#_sending_a_numeric_metric">Sending a numeric metric</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_sending_a_string_metric"></a>Sending a String metric</h3></div></div></div><p>The message body will be converted to a String and sent as a metric
value.&nbsp; Unlike numeric metrics, String values can&#8217;t be charted but
Ganglia makes them available for reporting.&nbsp; The os_version string at
the top of every Ganglia host page is an example of a String metric.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:string.for.ganglia"</em></strong>)
    .setHeader(GangliaConstants.METRIC_NAME, simple(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"my_string_metric"</em></strong>))
    .setHeader(GangliaConstants.METRIC_TYPE, GMetricType.STRING)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:ganglia.tx"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:ganglia.tx"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"ganglia:239.2.11.71:8649?mode=MULTICAST&amp;prefix=test"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_sending_a_numeric_metric"></a>Sending a numeric metric</h3></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:value.for.ganglia"</em></strong>)
    .setHeader(GangliaConstants.METRIC_NAME, simple(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"widgets_in_stock"</em></strong>))
    .setHeader(GangliaConstants.METRIC_TYPE, GMetricType.UINT32)
    .setHeader(GangliaConstants.METRIC_UNITS, simple(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"widgets"</em></strong>))
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:ganglia.tx"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:ganglia.tx"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"ganglia:239.2.11.71:8649?mode=MULTICAST&amp;prefix=test"</em></strong>);</pre></div></div></div></body></html>
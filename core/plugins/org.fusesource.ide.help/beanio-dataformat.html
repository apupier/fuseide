<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>BeanIO DataFormat</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="bean-component.html" title="Bean Component"><link rel="next" href="beanstalk-component.html" title="Beanstalk Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="beanio-dataformat"></a>BeanIO DataFormat</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="beanio-dataformat.html#_options_8">Options</a></span></dt><dt><span class="section"><a href="beanio-dataformat.html#_usage_78">Usage</a></span></dt><dt><span class="section"><a href="beanio-dataformat.html#_dependencies_18">Dependencies</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.10</strong></span></p><p>The BeanIO Data Format uses
<a class="link" href="http://beanio.org/" target="_top">BeanIO</a> to handle flat payloads (such as XML, CSV,
delimited, or fixed length formats).</p><p>BeanIO is configured using a
<a class="link" href="http://beanio.org/2.0/docs/reference/index.html#TheMappingFile" target="_top">mappings
XML</a> file where you define the mapping from the flat format to Objects
(POJOs). This mapping file is mandatory to use.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_8"></a>Options</h2></div></div></div><p>The BeanIO dataformat supports 9 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>mapping</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The BeanIO mapping file. Is by default loaded from the classpath. You can prefix with file:, http:, or classpath: to denote from where to load the mapping file.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>streamName</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The name of the stream to use.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreUnidentifiedRecords</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to ignore unidentified records.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreUnexpectedRecords</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to ignore unexpected records.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreInvalidRecords</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to ignore invalid records.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>encoding</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The charset to use. Is by default the JVM platform default charset.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>beanReaderErrorHandlerType</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To use a custom org.apache.camel.dataformat.beanio.BeanIOErrorHandler as error handler while parsing. Configure the fully qualified class name of the error handler. Notice the options ignoreUnidentifiedRecords, ignoreUnexpectedRecords, and ignoreInvalidRecords may not be in use when you use a custom error handler.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>unmarshalSingleObject</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>This options controls whether to unmarshal as a list of objects or as a single object only. The former is the default mode, and the latter is only intended in special use-cases where beanio maps the Camel message to a single POJO bean.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_usage_78"></a>Usage</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="beanio-dataformat.html#_using_java_dsl">Using Java DSL</a></span></dt><dt><span class="section"><a href="beanio-dataformat.html#_using_xml_dsl">Using XML DSL</a></span></dt></dl></div><p>An example of a
<a class="link" href="https://svn.apache.org/repos/asf/camel/trunk/components/camel-beanio/src/test/resources/org/apache/camel/dataformat/beanio/mappings.xml" target="_top">mapping
file is here</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_using_java_dsl"></a>Using Java DSL</h3></div></div></div><p>To use the <code class="literal">BeanIODataFormat</code> you need to configure the data format with
the mapping file, as well the name of the stream.
 In Java DSL this can be done as shown below. The streamName is
"employeeFile".</p><p>Then we have two routes. The first route is for transforming CSV data
into a List&lt;Employee&gt; Java objects. Which we then
split, so the mock endpoint
 receives a message for each row.</p><p>The 2nd route is for the reverse operation, to transform a
List&lt;Employee&gt; into a stream of CSV data.</p><p>The CSV data could for example be as below:</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_using_xml_dsl"></a>Using XML DSL</h3></div></div></div><p>To use the BeanIO data format in XML, you need to configure it using the
&lt;beanio&gt; XML tag as shown below. The routes is similar to the example
above.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_18"></a>Dependencies</h2></div></div></div><p>To use BeanIO in your Camel routes you need to add a dependency on
<span class="strong"><strong>camel-beanio</strong></span> which implements this data format.</p><p>If you use Maven you can just add the following to your pom.xml,
substituting the version number for the latest &amp; greatest release (see
the download page for the latest versions).</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-beanio<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>2.10.0<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre></div></div></body></html>
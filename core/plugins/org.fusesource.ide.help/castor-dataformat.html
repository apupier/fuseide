<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Castor DataFormat (deprecated)</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="caffeine-loadcache-component.html" title="Caffeine LoadCache Component"><link rel="next" href="_camel_cdi.html" title="Camel CDI"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="castor-dataformat"></a>Castor DataFormat (deprecated)</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="castor-dataformat.html#_using_the_java_dsl_4">Using the Java DSL</a></span></dt><dt><span class="section"><a href="castor-dataformat.html#_using_spring_xml_2">Using Spring XML</a></span></dt><dt><span class="section"><a href="castor-dataformat.html#_options_16">Options</a></span></dt><dt><span class="section"><a href="castor-dataformat.html#_dependencies_23">Dependencies</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.1</strong></span></p><p>Castor is a Data Format which uses the
<a class="link" href="http://www.castor.org/" target="_top">Castor XML library</a> to unmarshal an XML payload
into Java objects or to marshal Java objects into an XML payload.</p><p>As usually you can use either Java DSL or Spring XML to work with Castor
Data Format.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_the_java_dsl_4"></a>Using the Java DSL</h2></div></div></div><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:order"</em></strong>).
  marshal().castor().
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:order"</em></strong>);</pre><p>For example the following uses a named DataFormat of Castor which uses
default Castor data binding features.</p><pre class="programlisting">CastorDataFormat castor = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CastorDataFormat ();

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:My.Queue"</em></strong>).
  unmarshal(castor).
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mqseries:Another.Queue"</em></strong>);</pre><p>If you prefer to use a named reference to a data format which can then
be defined in your Registry such as via your Spring XML file. e.g.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:My.Queue"</em></strong>).
  unmarshal(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mycastorType"</em></strong>).
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mqseries:Another.Queue"</em></strong>);</pre><p>If you want to override default mapping schema by providing a mapping
file you can set it as follows.</p><pre class="programlisting">CastorDataFormat castor = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CastorDataFormat ();
castor.setMappingFile(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mapping.xml"</em></strong>);</pre><p>Also if you want to have more control on Castor Marshaller and
Unmarshaller you can access them as below.</p><pre class="programlisting">castor.getMarshaller();
castor.getUnmarshaller();</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_spring_xml_2"></a>Using Spring XML</h2></div></div></div><p>The following example shows how to use Castor to unmarshal using Spring
configuring the castor data type</p><pre class="programlisting">&lt;camelContext id=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"camel"</em></strong> xmlns=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http://camel.apache.org/schema/spring"</em></strong>&gt;
  &lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>/&gt;
    &lt;unmarshal&gt;
      &lt;castor validation=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"true"</em></strong> /&gt;
    &lt;/unmarshal&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</pre><p>This example shows how to configure the data type just once and reuse it
on multiple routes. You have to set the &lt;castor&gt; element directly in
&lt;camelContext&gt;.</p><pre class="programlisting">&lt;camelContext&gt;
&lt;camelContext id=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"camel"</em></strong> xmlns=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http://camel.apache.org/schema/spring"</em></strong>&gt;
  &lt;dataFormats&gt;
    &lt;castor id=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myCastor"</em></strong>/&gt;
  &lt;/dataFormats&gt;

  &lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>/&gt;
    &lt;marshal ref=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myCastor"</em></strong>/&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:marshalled"</em></strong>/&gt;
  &lt;/route&gt;
  &lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:marshalled"</em></strong>/&gt;
    &lt;unmarshal ref=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myCastor"</em></strong>/&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>/&gt;
  &lt;/route&gt;

&lt;/camelContext&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_16"></a>Options</h2></div></div></div><p>The Castor dataformat supports 9 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>mappingFile</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Path to a Castor mapping file to load from the classpath.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>whitelistEnabled</strong></span></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Define if Whitelist feature is enabled or not</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>allowedUnmarshallObjects</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Define the allowed objects to be unmarshalled. You can specify the FQN class name of allowed objects, and you can use comma to separate multiple entries. It is also possible to use wildcards and regular expression which is based on the pattern defined by link org.apache.camel.util.EndpointHelpermatchPattern(String, String). Denied objects takes precedence over allowed objects.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>deniedUnmarshallObjects</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Define the denied objects to be unmarshalled. You can specify the FQN class name of deined objects, and you can use comma to separate multiple entries. It is also possible to use wildcards and regular expression which is based on the pattern defined by link org.apache.camel.util.EndpointHelpermatchPattern(String, String). Denied objects takes precedence over allowed objects.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>validation</strong></span></p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether validation is turned on or off. Is by default true.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>encoding</strong></span></p></td><td align="left" valign="top"><p><code class="literal">UTF-8</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Encoding to use when marshalling an Object to XML. Is by default UTF-8</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>packages</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String[]</code></p></td><td align="left" valign="top"><p>Add additional packages to Castor XmlContext</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>classes</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String[]</code></p></td><td align="left" valign="top"><p>Add additional class names to Castor XmlContext</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_23"></a>Dependencies</h2></div></div></div><p>To use Castor in your camel routes you need to add the a dependency on
<span class="strong"><strong>camel-castor</strong></span> which implements this data format.</p><p>If you use maven you could just add the following to your pom.xml,
substituting the version number for the latest &amp; greatest release (see
the download page for the latest versions).</p><pre class="programlisting">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-castor&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</pre></div></div></body></html>
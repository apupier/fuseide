<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Mapping rules</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="camel-zipkin-Example.html" title="Example"><link rel="next" href="camel-zipkin-camel-zipin-starter.html" title="camel-zipin-starter"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="camel-zipkin-Mappingrules"></a>Mapping rules</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="camel-zipkin-Mappingrules.html#camel-zipkin-Noclientorservermappings">No client or server mappings</a></span></dt></dl></div><p>The service name mapping for server occurs using the following rules</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Is there an exclude pattern that matches the endpoint uri of the
from endpoint? If yes then skip.</li><li class="listitem">Is there a match in the serviceServiceMapping that matches the
endpoint uri of the from endpoint? If yes, then use the found service name</li><li class="listitem">Is there a match in the serviceServiceMapping that matches the route
id of the current route? If yes, then use the found service name</li><li class="listitem">Is there a match in the serviceServiceMapping that matches the
original route id where the exchange started? If yes, then use the found
service name</li><li class="listitem">No service name was found, the exchange is not traced by zipkin</li></ol></div><p>The service name mapping for client occurs using the following rules</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Is there an exclude pattern that matches the endpoint uri of the
from endpoint? If yes then skip.</li><li class="listitem">Is there a match in the clientServiceMapping that matches the
endpoint uri of endpoint where the message is being sent to? If yes, then
use the found service name</li><li class="listitem">Is there a match in the clientServiceMapping that matches the route
id of the current route? If yes, then use the found service name</li><li class="listitem">Is there a match in the clientServiceMapping that matches the
original route id where the exchange started? If yes, then use the found
service name</li><li class="listitem">No service name was found, the exchange is not traced by zipkin</li></ol></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="camel-zipkin-Noclientorservermappings"></a>No client or server mappings</h2></div></div></div><p>If there has been no configuration of client or server service mappings,
CamelZipkin runs in a fallback mode, and uses endpoint
uris as the service name.</p><p>In the example above, this would mean the service names would be defined as
if you add the following code yourself:</p><pre class="programlisting">zipkin.addServerServiceMapping(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:inbox"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:inbox"</em></strong>);
zipkin.addClientServiceMapping(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http:someserver/somepath"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http:someserver/somepath"</em></strong>);</pre><p>This is not a recommended approach, but gets you up and running quickly
without doing any service name mappings. However, when you have multiple
systems across your infrastructure, then you should consider using human-readable service names, that you map to instead of using the camel endpoint
uris.</p></div></div></body></html>
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>JAXB DataFormat</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="_jasypt_component.html" title="Jasypt component"><link rel="next" href="JBossDataGrid.html" title="JBoss Data Grid Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="jaxb-dataformat"></a>JAXB DataFormat</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="jaxb-dataformat.html#_options_74">Options</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_using_the_java_dsl_5">Using the Java DSL</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_using_spring_xml_4">Using Spring XML</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_partial_marshalling_unmarshalling">Partial marshalling/unmarshalling</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_fragment">Fragment</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_ignoring_the_nonxml_character">Ignoring the NonXML Character</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_working_with_the_objectfactory">Working with the ObjectFactory</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_setting_encoding">Setting encoding</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_controlling_namespace_prefix_mapping">Controlling namespace prefix mapping</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_schema_validation">Schema validation</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_schema_location">Schema Location</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_marshal_data_that_is_already_xml">Marshal data that is already XML</a></span></dt><dt><span class="section"><a href="jaxb-dataformat.html#_dependencies_39">Dependencies</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 1.0</strong></span></p><p>JAXB is a Data Format which uses the JAXB2 XML
marshalling standard which is included in Java 6 to unmarshal an XML
payload into Java objects or to marshal Java objects into an XML
payload.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_74"></a>Options</h2></div></div></div><p>The JAXB dataformat supports 18 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>contextPath</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Package name where your JAXB classes are located.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>schema</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To validate against an existing schema. Your can use the prefix classpath:, file: or http: to specify how the resource should by resolved. You can separate multiple schema files by using the ',' character.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>schemaSeverityLevel</strong></span></p></td><td align="left" valign="top"><p><code class="literal">0</code></p></td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>Sets the schema severity level to use when validating against a schema. This level determines the minimum severity error that triggers JAXB to stop continue parsing. The default value of 0 (warning) means that any error (warning, error or fatal error) will trigger JAXB to stop. There are the following three levels: 0=warning, 1=error, 2=fatal error.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>prettyPrint</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>To enable pretty printing output nicely formatted. Is by default false.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>objectFactory</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to allow using ObjectFactory classes to create the POJO classes during marshalling. This only applies to POJO classes that has not been annotated with JAXB and providing jaxb.index descriptor files.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>ignoreJAXBElement</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether to ignore JAXBElement elements - only needed to be set to false in very special use-cases.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>mustBeJAXBElement</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether marhsalling must be java objects with JAXB annotations. And if not then it fails. This option can be set to false to relax that, such as when the data is already in XML format.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>filterNonXmlChars</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>To ignore non xml characheters and replace them with an empty space.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>encoding</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To overrule and use a specific encoding</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>fragment</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>To turn on marshalling XML fragment trees. By default JAXB looks for XmlRootElement annotation on given class to operate on whole XML tree. This is useful but not always - sometimes generated code does not have XmlRootElement annotation, sometimes you need unmarshall only part of tree. In that case you can use partial unmarshalling. To enable this behaviours you need set property partClass. Camel will pass this class to JAXB&#8217;s unmarshaler.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>partClass</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Name of class used for fragment parsing. See more details at the fragment option.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>partNamespace</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>XML namespace to use for fragment parsing. See more details at the fragment option.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>namespacePrefixRef</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>When marshalling using JAXB or SOAP then the JAXB implementation will automatic assign namespace prefixes, such as ns2, ns3, ns4 etc. To control this mapping, Camel allows you to refer to a map which contains the desired mapping.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>xmlStreamWriterWrapper</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To use a custom xml stream writer.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>schemaLocation</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To define the location of the schema</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>noNamespaceSchemaLocation</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To define the location of the namespaceless schema</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>jaxbProviderProperties</strong></span></p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Refers to a custom java.util.Map to lookup in the registry containing custom JAXB provider properties to be used with the JAXB marshaller.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_the_java_dsl_5"></a>Using the Java DSL</h2></div></div></div><p>For example the following uses a named DataFormat of <span class="emphasis"><em>jaxb</em></span> which is
configured with a number of Java package names to initialize the
<a class="link" href="http://java.sun.com/javase/6/docs/api/javax/xml/bind/JAXBContext.html" target="_top">JAXBContext</a>.</p><pre class="programlisting">DataFormat jaxb = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> JaxbDataFormat(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"com.acme.model"</em></strong>);

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:My.Queue"</em></strong>).
  unmarshal(jaxb).
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mqseries:Another.Queue"</em></strong>);</pre><p>You can if you prefer use a named reference to a data format which can
then be defined in your Registry such as via your
Spring XML file. e.g.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:My.Queue"</em></strong>).
  unmarshal(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myJaxbDataType"</em></strong>).
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mqseries:Another.Queue"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_using_spring_xml_4"></a>Using Spring XML</h2></div></div></div><p>The following example shows how to use JAXB to unmarshal using
Spring configuring the jaxb data type</p><p>This example shows how to configure the data type just once and reuse it
on multiple routes.</p><p><span class="strong"><strong>Multiple context paths</strong></span></p><p>It is possible to use this data format with more than one context path.
You can specify context path using <code class="literal">:</code> as separator, for example
<code class="literal">com.mycompany:com.mycompany2</code>. Note that this is handled by JAXB
implementation and might change if you use different vendor than RI.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_partial_marshalling_unmarshalling"></a>Partial marshalling/unmarshalling</h2></div></div></div><p><span class="strong"><strong>This feature is new to Camel 2.2.0.</strong></span>
 JAXB 2 supports marshalling and unmarshalling XML tree fragments. By
default JAXB looks for <code class="literal">@XmlRootElement</code> annotation on given class to
operate on whole XML tree. This is useful but not always - sometimes
generated code does not have @XmlRootElement annotation, sometimes you
need unmarshall only part of tree.
 In that case you can use partial unmarshalling. To enable this
behaviours you need set property <code class="literal">partClass</code>. Camel will pass this class
to JAXB&#8217;s unmarshaler. If <code class="literal">JaxbConstants.JAXB_PART_CLASS</code> is set as
one of headers, (even if partClass property is set on DataFormat), the property
on DataFormat is surpassed and the one set in the headers is used.</p><p>For marshalling you have to add <code class="literal">partNamespace</code> attribute with QName of
destination namespace. Example of Spring DSL you can find above.
If <code class="literal">JaxbConstants.JAXB_PART_NAMESPACE</code> is set as
one of headers, (even if partNamespace property is set on DataFormat), the property
on DataFormat is surpassed and the one set in the headers is used. While setting
<code class="literal">partNamespace</code> through <code class="literal">JaxbConstants.JAXB_PART_NAMESPACE</code>, please
note that you need to specify its value {[namespaceUri]}[localPart]</p><pre class="programlisting">   ...
   .setHeader(JaxbConstants.JAXB_PART_NAMESPACE, simple(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"{http://www.camel.apache.org/jaxb/example/address/1}address"</em></strong>));
   ...</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_fragment"></a>Fragment</h2></div></div></div><p><span class="strong"><strong>This feature is new to Camel 2.8.0.</strong></span>
 JaxbDataFormat has new property fragment which can set the the
<code class="literal">Marshaller.JAXB_FRAGMENT</code> encoding property on the JAXB Marshaller. If
you don&#8217;t want the JAXB Marshaller to generate the XML declaration, you
can set this option to be true. The default value of this property is
false.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_ignoring_the_nonxml_character"></a>Ignoring the NonXML Character</h2></div></div></div><p><span class="strong"><strong>This feature is new to Camel 2.2.0.</strong></span>
 JaxbDataFromat supports to ignore the
<a class="link" href="http://www.w3.org/TR/2004/REC-xml-20040204/#NT-Char" target="_top">NonXML Character</a>,
you just need to set the filterNonXmlChars property to be true,
JaxbDataFormat will replace the NonXML character with " " when it is
marshaling or unmarshaling the message. You can also do it by setting
the Exchange property
<code class="literal">Exchange.FILTER_NON_XML_CHARS</code>.</p><p>&nbsp;</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="30%" class="col_1"><col width="10%" class="col_2"><col width="60%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">&nbsp;</th><th align="left" valign="top">JDK 1.5</th><th align="left" valign="top">JDK 1.6+</th></tr></thead><tbody><tr><td align="left" valign="top"><p>Filtering in use</p></td><td align="left" valign="top"><p>StAX API and implementation</p></td><td align="left" valign="top"><p>No</p></td></tr><tr><td align="left" valign="top"><p>Filtering not in use</p></td><td align="left" valign="top"><p>StAX API only</p></td><td align="left" valign="top"><p>No</p></td></tr></tbody></table></div><p>This feature has been tested with Woodstox 3.2.9 and Sun JDK 1.6 StAX
implementation.</p><p><span class="strong"><strong>New for Camel 2.12.1</strong></span>
 JaxbDataFormat now allows you to customize the XMLStreamWriter used to
marshal the stream to XML. Using this configuration, you can add your
own stream writer to completely remove, escape, or replace non-xml
characters.</p><pre class="programlisting">   JaxbDataFormat customWriterFormat = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> JaxbDataFormat(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"org.apache.camel.foo.bar"</em></strong>);
  customWriterFormat.setXmlStreamWriterWrapper(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> TestXmlStreamWriter());</pre><p>The following example shows using the Spring DSL and also enabling
Camel&#8217;s NonXML filtering:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"testXmlStreamWriterWrapper"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.camel.jaxb.TestXmlStreamWriter"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;jaxb</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">filterNonXmlChars</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"true"</span>  <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">contextPath</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.camel.foo.bar"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlStreamWriterWrapper</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"#testXmlStreamWriterWrapper"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_working_with_the_objectfactory"></a>Working with the ObjectFactory</h2></div></div></div><p>If you use XJC to create the java class from the schema, you will get an
ObjectFactory for you JAXB context. Since the ObjectFactory uses
<a class="link" href="http://java.sun.com/javase/6/docs/api/javax/xml/bind/JAXBElement.html" target="_top">JAXBElement</a>
to hold the reference of the schema and element instance value,
jaxbDataformat will ignore the JAXBElement by default and you will get
the element instance value instead of the JAXBElement object form the
unmarshaled message body. 
 If you want to get the JAXBElement object form the unmarshaled message
body, you need to set the JaxbDataFormat object&#8217;s ignoreJAXBElement
property to be false.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_setting_encoding"></a>Setting encoding</h2></div></div></div><p>You can set the <span class="strong"><strong>encoding</strong></span> option to use when marshalling. Its the
<code class="literal">Marshaller.JAXB_ENCODING</code> encoding property on the JAXB Marshaller.
 You can setup which encoding to use when you declare the JAXB data
format. You can also provide the encoding in the
Exchange property <code class="literal">Exchange.CHARSET_NAME</code>. This
property will overrule the encoding set on the JAXB data format.</p><p>In this Spring DSL we have defined to use <code class="literal">iso-8859-1</code> as the encoding:</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_controlling_namespace_prefix_mapping"></a>Controlling namespace prefix mapping</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.11</strong></span></p><p>When marshalling using <a class="link" href="jaxb-dataformat.html" title="JAXB DataFormat">JAXB</a> or <a class="link" href="jaxb-dataformat.html" title="JAXB DataFormat">SOAP</a> then
the JAXB implementation will automatic assign namespace prefixes, such
as ns2, ns3, ns4 etc. To control this mapping, Camel allows you to refer
to a map which contains the desired mapping.</p><p>Notice this requires having JAXB-RI 2.1 or better (from SUN) on the
classpath, as the mapping functionality is dependent on the
implementation of JAXB, whether its supported.</p><p>For example in Spring XML we can define a Map with the mapping. In the
mapping file below, we map SOAP to use soap as prefix. While our custom
namespace "http://www.mycompany.com/foo/2" is not using any prefix.</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;util:map</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"myMap"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;entry</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">key</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.w3.org/2003/05/soap-envelope"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"soap"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- we dont want any prefix for our namespace --&gt;</em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;entry</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">key</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.mycompany.com/foo/2"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">""</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/util:map&gt;</strong></pre><p>To use this in <a class="link" href="jaxb-dataformat.html" title="JAXB DataFormat">JAXB</a> or <a class="link" href="jaxb-dataformat.html" title="JAXB DataFormat">SOAP</a> you refer to
this map, using the <code class="literal">namespacePrefixRef</code> attribute as shown below. Then
Camel will lookup in the Registry a <code class="literal">java.util.Map</code>
with the id "myMap", which was what we defined above.</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;marshal&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;soapjaxb</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">version</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"1.2"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">contextPath</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.mycompany.foo"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">namespacePrefixRef</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"myMap"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/marshal&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_schema_validation"></a>Schema validation</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.11</strong></span></p><p>The JAXB Data Format supports validation by
marshalling and unmarshalling from/to XML. Your can use the prefix
<span class="strong"><strong>classpath:</strong></span>, <span class="strong"><strong>file:</strong></span> or <span class="strong"><strong>http:</strong></span> to specify how the resource should by
resolved. You can separate multiple schema files by using the <span class="strong"><strong>','</strong></span>
character.</p><p><span class="strong"><strong>Known issue</strong></span></p><p>Camel 2.11.0 and 2.11.1 has a known issue by validation multiple
`Exchange&#8217;s in parallel. See
<a class="link" href="https://issues.apache.org/jira/browse/CAMEL-6630" target="_top">CAMEL-6630</a>. This is
fixed with Camel 2.11.2/2.12.0.</p><p>Using the Java DSL, you can configure it in the following way:</p><pre class="programlisting">JaxbDataFormat jaxbDataFormat = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> JaxbDataFormat();
jaxbDataFormat.setContextPath(Person.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>.getPackage().getName());
jaxbDataFormat.setSchema(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"classpath:person.xsd,classpath:address.xsd"</em></strong>);</pre><p>You can do the same using the XML DSL:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;marshal&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;jaxb</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jaxb"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">schema</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"classpath:person.xsd,classpath:address.xsd"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/marshal&gt;</strong></pre><p>Camel will create and pool the underling <code class="literal">SchemaFactory</code> instances on
the fly, because the <code class="literal">SchemaFactory</code> shipped with the JDK is not thread
safe.
 However, if you have a <code class="literal">SchemaFactory</code> implementation which is thread
safe, you can configure the JAXB data format to use this one:</p><pre class="programlisting">JaxbDataFormat jaxbDataFormat = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> JaxbDataFormat();
jaxbDataFormat.setSchemaFactory(thradSafeSchemaFactory);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_schema_location"></a>Schema Location</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.14</strong></span></p><p>The JAXB&nbsp;Data Format&nbsp;supports to specify the
SchemaLocation when marshaling the XML.&nbsp;</p><p>Using the Java DSL, you can configure it in the following way:</p><pre class="programlisting">JaxbDataFormat jaxbDataFormat = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> JaxbDataFormat();
jaxbDataFormat.setContextPath(Person.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>.getPackage().getName());
jaxbDataFormat.setSchemaLocation(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"schema/person.xsd"</em></strong>);</pre><p>You can do the same using the XML DSL:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;marshal&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;jaxb</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jaxb"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">schemaLocation</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"schema/person.xsd"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/marshal&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_marshal_data_that_is_already_xml"></a>Marshal data that is already XML</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.14.1</strong></span></p><p>The JAXB marshaller requires that the message body is JAXB compatible,
eg its a JAXBElement, eg a java instance that has JAXB annotations, or
extend JAXBElement. There can be situations where the message body is
already in XML, eg from a String type. There is a new
option&nbsp;<code class="literal">mustBeJAXBElement</code> you can set to false, to relax this check, so
the JAXB marshaller only attempts to marshal JAXBElements
(javax.xml.bind.JAXBIntrospector#isElement returns true). And in those
situations the marshaller fallbacks to marshal the message body as-is.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_39"></a>Dependencies</h2></div></div></div><p>To use JAXB in your camel routes you need to add the a dependency on
<span class="strong"><strong>camel-jaxb</strong></span> which implements this data format.</p><p>If you use maven you could just add the following to your pom.xml,
substituting the version number for the latest &amp; greatest release (see
the download page for the latest versions).</p><pre class="programlisting">&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-jaxb&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;</pre></div></div></body></html>
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Language Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="kubernetes-services-component.html" title="Kubernetes Services Component"><link rel="next" href="ldap-component.html" title="LDAP Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="language-component"></a>Language Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="language-component.html#_uri_format_114">URI format</a></span></dt><dt><span class="section"><a href="language-component.html#_uri_options_35">URI Options</a></span></dt><dt><span class="section"><a href="language-component.html#_message_headers_29">Message Headers</a></span></dt><dt><span class="section"><a href="language-component.html#_examples_19">Examples</a></span></dt><dt><span class="section"><a href="language-component.html#_loading_scripts_from_resources">Loading scripts from resources</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.5</strong></span></p><p>The language component allows you to send Exchange
to an endpoint which executes a script by any of the supported
Languages in Camel.
 By having a component to execute language scripts, it allows more
dynamic routing capabilities. For example by using the
Routing Slip or <a class="link" href="dynamic-router.html" target="_top">Dynamic
Router</a> EIPs you can send messages to <code class="literal">language</code> endpoints where the
script is dynamic defined as well.</p><p>This component is provided out of the box in <code class="literal">camel-core</code> and hence no
additional JARs is needed. You only have to include additional Camel
components if the language of choice mandates it, such as using
<a class="link" href="groovy-language.html" title="Groovy Language">Groovy</a> or <a class="link" href="groovy-language.html" title="Groovy Language">JavaScript</a> languages.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_format_114"></a>URI format</h2></div></div></div><pre class="screen">language://languageName[:script][?options]</pre><p>And from Camel 2.11 onwards you can refer to an external resource for
the script using same notation as supported by the other
<a class="link" href="language-component.html" title="Language Component">Language</a>s in Camel</p><pre class="screen">language://languageName:resource:scheme:location][?options]</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_uri_options_35"></a>URI Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="language-component.html#_path_parameters_2_parameters_28">Path Parameters (2 parameters):</a></span></dt><dt><span class="section"><a href="language-component.html#_query_parameters_6_parameters_9">Query Parameters (6 parameters):</a></span></dt></dl></div><p>The Language component has no options.</p><p>The Language endpoint is configured using URI syntax:</p><pre class="screen">language:languageName:resourceUri</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_2_parameters_28"></a>Path Parameters (2 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>languageName</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Sets the name of the language to use</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>resourceUri</strong></span></p></td><td align="left" valign="top"><p>Path to the resource, or a reference to lookup a bean in the Registry to use as the resource</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_6_parameters_9"></a>Query Parameters (6 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>binary</strong></span> (producer)</p></td><td align="left" valign="top"><p>Whether the script is binary content or text content. By default the script is read as text content (eg java.lang.String)</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>cacheScript</strong></span> (producer)</p></td><td align="left" valign="top"><p>Whether to cache the compiled script and reuse Notice reusing the script can cause side effects from processing one Camel org.apache.camel.Exchange to the next org.apache.camel.Exchange.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentCache</strong></span> (producer)</p></td><td align="left" valign="top"><p>Sets whether to use resource content cache or not.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>script</strong></span> (producer)</p></td><td align="left" valign="top"><p>Sets the script to execute</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>transform</strong></span> (producer)</p></td><td align="left" valign="top"><p>Whether or not the result of the script should be used as message body. This options is default true.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_message_headers_29"></a>Message Headers</h2></div></div></div><p>The following message headers can be used to affect the behavior of the
component</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="90%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Header</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelLanguageScript</code></p></td><td align="left" valign="top"><p>The script to execute provided in the header. Takes precedence over
script configured on the endpoint.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_examples_19"></a>Examples</h2></div></div></div><p>For example you can use the <a class="link" href="simple-language.html" title="Simple Language">Simple</a> language to
Message Translator a message:</p><p>In case you want to convert the message body type you can do this as
well:</p><p>You can also use the <a class="link" href="groovy-language.html" title="Groovy Language">Groovy</a> language, such as this
example where the input message will by multiplied with 2:</p><p>You can also provide the script as a header as shown below. Here we use
<a class="link" href="xpath-language.html" title="XPath Language">XPath</a> language to extract the text from the <code class="literal">&lt;foo&gt;</code>
tag.</p><pre class="programlisting">Object out = producer.requestBodyAndHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"language:xpath"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&lt;foo&gt;Hello World&lt;/foo&gt;"</em></strong>, Exchange.LANGUAGE_SCRIPT, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"/foo/text()"</em></strong>);
assertEquals(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello World"</em></strong>, out);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_loading_scripts_from_resources"></a>Loading scripts from resources</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.9</strong></span></p><p>You can specify a resource uri for a script to load in either the
endpoint uri, or in the <code class="literal">Exchange.LANGUAGE_SCRIPT</code> header.
 The uri must start with one of the following schemes: file:,
classpath:, or http:</p><p>For example to load a script from the classpath:</p><p>By default the script is loaded once and cached. However you can disable
the <code class="literal">contentCache</code> option and have the script loaded on each
evaluation.
 For example if the file myscript.txt is changed on disk, then the
updated script is used:</p><p>From <span class="strong"><strong>Camel 2.11</strong></span> onwards you can refer to the resource similar to the
other <a class="link" href="language-component.html" title="Language Component">Language</a>s in Camel by prefixing with
<code class="literal">"resource:"</code> as shown below:</p></div></div></body></html>